<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;
      charset=utf-8">
    <meta name="generator" content="Bluefish 2.2.4" >
    <meta name="author" content="Ron Burkey" >
    <title>Virtual AGC yaYUL Page</title>
    <meta name="author" content="Ron Burkey" >
    <script>
  (function() {
    var cx = '005579885767466475821:oqt5wpxqlt8';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
    <meta name="generator" content="Bluefish 2.2.4" >
  </head>
  <body style="background-image: url(gray3.jpg);">
    <table nosave="" border="1" cellpadding="10" width="100%">
      <tbody>
        <tr nosave="">
          <td nosave="" align="center" valign="middle">
            <div align="center"> </div>
            <center>
              <div align="center"> </div>
              <table nosave="" width="100%">
                <tbody>
                  <tr nosave="">
                    <td nosave="" align="center" valign="middle">
                      <div align="center"> </div>
                      <table nosave="">
                        <tbody>
                          <tr align="center">
                            <td style="vertical-align: top;"><a
                                href="index.html"><small>Home</small></a><br>
                            </td>
                          </tr>
                          <tr align="center">
                            <td style="vertical-align: top;"><span
                                style="text-decoration: underline;"><font
                                  size="-1"><a href="yaAGS.html">AGS<br>
                                  </a></font></span></td>
                          </tr>
                          <tr align="center">
                            <td style="vertical-align: top;"><a
                                href="LVDC.html"><small>LVDC</small></a><br>
                            </td>
                          </tr>
                          <tr align="center">
                            <td style="vertical-align: top;"><a
                                href="Gemini.html"><small>Gemini</small></a><br>
                            </td>
                          </tr>
                          <tr align="center">
                            <td> <font size="-1"><a
                                  href="download.html">Download</a></font>
                            </td>
                          </tr>
                          <tr align="center">
                            <td> <font size="-1"><a href="links.html">Document



                                  library</a></font> </td>
                          </tr>
                          <tr align="center">
                            <td> <font color="#000000"><font size="-1"><a
                                    href="changes.html">Change log</a></font></font>
                            </td>
                          </tr>
                          <tr align="center">
                            <td> <font size="-1"><a href="buglist.html">Bug



                                  and issues</a></font> </td>
                          </tr>
                          <tr nosave="" align="center">
                            <td nosave=""> <font color="#000000"><font
                                  size="-1"><a href="developer.html">Developer



                                    info</a></font></font> </td>
                          </tr>
                        </tbody>
                      </table>
                      <div align="center"> </div>
                    </td>
                    <td nosave="" align="center" valign="top">
                      <center><b><font color="#999900"><font size="+3">Virtual
AGC



                              &mdash; AGS &mdash; LVDC &mdash; Gemini</font></font></b></center>
                      <br>
                      <b><font color="#000000"><font size="+3">yaYUL<br>
                            <small>The AGC Cross-Assembler</small><br>
                            <br>
                          </font></font></b></td>
                    <td nosave="" align="center" valign="middle">
                      <div align="center"> </div>
                      <table nosave="">
                        <tbody>
                          <tr align="center">
                            <td style="vertical-align: top;"><font
                                size="-1"><a href="faq.html">FAQ</a></font></td>
                          </tr>
                          <tr align="center">
                            <td><font color="#000000"><font size="-1"><a
                                    href="yaAGC.html">yaAGC</a></font></font></td>
                          </tr>
                          <tr nosave="" align="center">
                            <td nosave=""><font size="-1"><a
                                  href="yaYUL.html">yaYUL</a></font></td>
                          </tr>
                          <tr align="center">
                            <td><font size="-1"><a href="yaDSKY.html">yaDSKY</a></font></td>
                          </tr>
                          <tr align="center">
                            <td style="vertical-align: top;"><small><a
                                  href="yaTelemetry.html">yaOtherStuff</a></small><br>
                            </td>
                          </tr>
                          <tr align="center">
                            <td><font color="#000000"><font size="-1"><a
                                    href="Luminary.html">Luminary</a></font></font></td>
                          </tr>
                          <tr align="center">
                            <td><font size="-1"><a href="Colossus.html">Colossus<br>
                                </a></font></td>
                          </tr>
                          <tr align="center">
                            <td style="vertical-align: top;"><small><a
                                  href="assembly_language_manual.html">Language



                                  Manual</a></small><br>
                            </td>
                          </tr>
                          <tr align="center">
                            <td style="vertical-align: top;"><font
                                size="-1"><a href="Pultorak.html">Physical



                                  Implementations<br>
                                </a></font></td>
                          </tr>
                        </tbody>
                      </table>
                      <div align="center"> </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div align="center"> </div>
            </center>
            <center>
              <div align="left"> </div>
            </center>
            <div align="left"> </div>
          </td>
          <td nosave="" align="center" height="200" valign="middle"
            width="200">
            <center><img src="ApolloPatch2.png" alt="" align="middle"
                height="200" hspace="0" border="0" vspace="0"
                width="200"> </center>
          </td>
        </tr>
        <tr>
          <td colspan="2" rowspan="1"><gcse:search></gcse:search><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h1><small>Contents</small></h1>
    <ul>
      <li><a href="#What_is_yaYUL_">What is yaYUL?</a></li>
      <li><a href="#Invoking_yaYUL">Invoking yaYUL</a></li>
      <li><a href="#Apollo_Source-Code_Naming">Apollo Source-Code Naming</a></li>
      <li><a href="#AGC4_Assembly_Language">AGC4 Assembly Language</a><br>
      </li>
    </ul>
    <h1><a name="What_is_yaYUL_"></a><small>What is yaYUL?<br>
      </small></h1>
    Apollo Command Module software (<span style="font-weight: bold;">Colossus</span>)
    or Lunar Module software (<span style="font-weight: bold;">Luminary</span>)
    was written in a computer language (AGC4 assembly language) invented
    at MIT's Instrumentation/Draper lab.&nbsp; Software whose source
    code is in "assembly language" must be processed to turn it into a
    binary format ("machine language") understood by the computer
    itself.&nbsp; The program that converts the human-written source
    code into machine-readable binary code is called an
    "assembler".&nbsp; The conversion from source code to machine code
    takes place prior to loading the software into the AGC, so the
    assembler software is actually not run by the AGC itself, but rather
    was run by ground computers weeks or months prior to the actual
    Apollo flights.&nbsp; <br>
    <br>
    (Incidentally, for debugging purposes, the original developers had a
    special read-write module which could be programmed from a paper
    tape and then plugged into the AGC and used as if it were a core
    rope.&nbsp; While this process was apparently not easy, it was
    certainly more convenient than manufacturing a core rope.&nbsp; The
    assembler produced the data for creating the paper tape.)<br>
    <br>
    At present, I'm not aware of any online copy of the source code for
    the original assembler, called <span style="font-weight: bold;">YUL</span>&mdash;nor


    would the type of computer originally used to run the <span
      style="font-weight: bold;">YUL</span> program be available to do
    so.&nbsp; That computer, by the way, was the IBM 650, with later
    porting to the Honywell 800.&nbsp; Therefore, I have created a
    completely new assembler, duplicating the features of the original <span
      style="font-weight: bold;">YUL</span> to the extent I think
    important, called <span style="font-weight: bold;">yaYUL</span>.&nbsp;


    In other words, <span style="font-weight: bold;">yaYUL</span> is
    used to convert <span style="font-weight: bold;">Luminary</span> or
    <span style="font-weight: bold;">Colossus</span> source code to a
    binary format usable by the <span style="font-weight: bold;">yaAGC</span>
    emulator.&nbsp; (Actually, I have <span style="font-style: italic;">seen</span>
    Hugh Blair-Smith's physical copy of the <span style="font-weight:
      bold;">YUL</span> source code, and it is an interesting document
    indeed.&nbsp; We hope/expect that it will be scanned and provided
    online at <a href="http://www.klabs.org">klabs.org</a>, but that
    has not yet been accomplished as of this writing, 2004-10-03.)<br>
    <br>
    The original AGC assembler was called <span style="font-weight:
      bold;">YUL</span> (from "yuletide") because the projected delivery
    date of the MOD 1A guidance computer, with system software, was
    Christmas, 1959.&nbsp; Hugh Blair-Smith tells us that YUL eventually
    supported the MOD 1A, MOD 1B, MOD 3S, MOD 3C, AGC4 (Block I AGC),
    and two versions of the final Block II AGC.&nbsp; <span
      style="font-weight: bold;">yaYUL</span> is not so flexible as
    this, and we confine ourselves merely to AGC4 assembly language and
    interpreter language.&nbsp; In real life, <span style="font-weight:
      bold;">YUL</span> was eventually succeeded by the <span
      style="font-weight: bold;">GAP</span> (General Assembly
    Program).&nbsp; But "yaGAP" doesn't have quite the ring to it that
    "yaYUL" does, so I feel entitled to ignore that fact.<br>
    <br>
    It is important to understand that there is almost no available
    documentation of how the assembler is <span style="font-style:
      italic;">supposed</span> to operate&mdash;i.e., of the syntax of AGC
    assembly language.&nbsp; (Well, the manual for <span
      style="font-weight: bold;">GAP</span> does exist, but I've not
    seen it yet.)&nbsp; Most that is known of the syntax of AGC assembly
    language has been deduced from <span style="font-weight: bold;">Luminary</span>
    and/or <span style="font-weight: bold;">Colossus</span> assembly
    listings and, frankly, some of this syntax is very obscure.&nbsp; I
    have written down what I have learned and what I have deduced in the
    <a href="assembly_language_manual.html">assembly-language manual</a>.&nbsp;
Therefore,



    <span style="font-weight: bold;">yaYUL</span> is not so much an
    assembler for AGC assembly language (which is undefined <span
      style="font-style: italic;">a priori</span>), as much as it is a
    utility which processes existing <span style="font-weight: bold;">Luminary</span>
    and/or <span style="font-weight: bold;">Colossus</span> source-code
    to produce good core-rope images for those specific programs.&nbsp;
    It is merely <span style="font-style: italic;">hoped</span> that <span
      style="font-weight: bold;">yaYUL</span> will perform acceptably as
    a general-purpose assembler for other AGC source-code files.&nbsp; <br>
    <br>
    The original <span style="font-weight: bold;">YUL</span> accepted a
    complete program (such as <span style="font-weight: bold;">Luminary</span>
    or <span style="font-weight: bold;">Colossus</span>) as decks of
    punch-cards, and seemingly preserved the code in tape libraries; an
    actual assembly run therefore worked on chunks of code extracted
    from the tape libraries.&nbsp; <span style="font-weight: bold;">yaYUL</span>
    works in a similar fashion except, of course, that source-code files
    are accepted rather than punch-card decks.&nbsp; The assembler
    directly outputs binary machine code.&nbsp; There is no linker. <br>
    <h2><a name="Invoking_yaYUL"></a>Invoking yaYUL</h2>
    Running the assembler is very simple.&nbsp; <span
      style="font-weight: bold;">yaYUL</span> is a command-line program,
    invoked as follows:<br>
    <br>
    <div style="text-align: center;"><span style="font-family:
        monospace;">yaYUL [OPTIONS] </span><span style="font-style:
        italic; font-family: monospace;">SourceFile</span><br>
    </div>
    <br>
    The binary executable is automatically created if no fatal errors
    have occurred during assembly.&nbsp; The binary file has the same
    name as the input source-code file, but with ".bin" added to the end
    of the filename.&nbsp; For example,<br>
    <br>
    <div style="text-align: center;"><span style="font-family:
        monospace;">yaYUL Luminary131.agc</span><br>
    </div>
    <br>
    would produce a file named "Luminary131.agc.bin", which would be
    directly usable by the <span style="font-weight: bold;">yaAGC</span>
    program. &nbsp; An annotated program listing (including any error
    messages) is written to the screen, or may be captured for later
    viewing:<br>
    <br>
    <div style="text-align: center;"><span style="font-family:
        monospace;">yaYUL </span><span style="font-style: italic;
        font-family: monospace;">SourceFile</span><span
        style="font-family: monospace;"> &gt;</span><span
        style="font-style: italic; font-family: monospace;">ProgramListing</span><br>
    </div>
    <br>
    As of version 20050728 or later, <span style="font-weight: bold;">yaYUL</span>
    also outputs a symbol-table file that can be used in conjunction
    with <span style="font-weight: bold;">yaAGC</span>'s "--debug"
    switch.&nbsp; This file will have the same name as the source-file,
    but with ".symtab" suffixed to it.<br>
    <br>
    In the unlikely event that you choose to create and/or modify some
    AGC assembly language, it is very important to understand that <span
      style="font-weight: bold;">yaYUL</span> requires at least one free
    word in each memory bank to store the "bugger word" (checksum) for
    that memory bank.&nbsp; You can only use 1777 words (octal) out of
    each 2000-word memory bank.&nbsp; If you completely fill a memory
    bank, the <span style="font-weight: bold;">yaYUL</span> is going to
    overwrite the final word of the bank with a bugger word, and you may
    or may not see an error message.&nbsp; (Sorry about that.)<br>
    <br>
    Since nobody is likely to be developing much new software for the
    AGC, <span style="font-weight: bold;">yaYUL</span> doesn't need to
    have very many command-line options.&nbsp; (Actually, in spite of
    saying there will be no new AGC software, I <span
      style="font-style: italic;">do</span> provide a newly-written AGC
    program in assembly language, for validating the CPU's instruction
    set, and <span style="font-weight: bold;">yaYUL</span> is perfectly
    adequate for assembling the validation suite.)&nbsp; Those options
    are as follows:<br>
    <br>
    --help<br>
    <div style="margin-left: 40px;">This causes the available options to
      be listed.<br>
    </div>
    <br>
    --block1<br>
    <div style="margin-left: 40px;">(As of 20160824.)&nbsp; Indicates
      that Block 1 assembly-language is processed rather than Block 2
      assembly-language.&nbsp; At this writing the only Block 1 source
      code available is the Solarium 055 program.<br>
    </div>
    <br>
    --force<br>
    <div style="margin-left: 40px;">Forces creation of the core-rope
      image file, which is normally bypassed when fatal errors are
      detected.&nbsp; (As of 2005-09-05, there are no known bugs left in
      <span style="font-weight: bold;">yaYUL</span> that need this
      switch as a workaround.)<br>
      <br>
    </div>
    --html<br>
    <div style="margin-left: 40px;">(20090629 and later.)&nbsp; Causes
      creation of an HTML version of the assembly listing.&nbsp; The
      top-level HTML filename is the same as <span style="font-style:
        italic;">SourceFile</span>, except that the .agc
      filename-extension (if present) is replaced with .html.&nbsp; An
      additional HTML file is created for every source file included by
      the top-level source file, and you can browse to them through
      links in the top-level file.&nbsp; Additionally, the HTML is
      syntax-highlighted, so that it is easy to distinguish
      basic-language opcodes from interpreter opcodes from line labels,
      etc.&nbsp; Finally, the HTML contains hyperlinking from where
      symbols are used to where they are defined.&nbsp; <a
        href="SourceAnnotations.html">It is also possible to add modern
        annotations to the source code.</a><br>
    </div>
    <br>
    --unpound-page<br>
    <div style="margin-left: 40px;">(20100220 and later.)&nbsp; If
      --html is used, causes bypassing of "## Page ..." to be treated as
      a regular AGC assembly-language comment.&nbsp; This may be useful
      if you are debugging source-code created from a scanned assembly
      listing, but probably not otherwise.<br>
    </div>
    &nbsp;<br>
    --max-passes=<span style="font-style: italic;">n</span><br>
    <div style="margin-left: 40px;">This sets the maximum number of
      passes used by the assembler to the number <span
        style="font-style: italic;">n</span>. The assembler will stop as
      soon as it can&mdash;i.e., it won't necessarily use all of the allowed
      passes, if it does not need to. For example, you might set <span
        style="font-style: italic;">n</span> to 10.&nbsp; <br>
      <br>
    </div>
    <table style="width: 95%; text-align: left; margin-left: auto;
      margin-right: auto;" border="1" cellpadding="2" cellspacing="2">
      <tbody>
        <tr>
          <td style="vertical-align: top;">At this point, you may be
            reasonably be wondering why a mere assembler would ever need
            to make 10 passes through the source code.&nbsp; Naively,
            one would expect a simple assembler to take 2 passes: one to
            resolve the values assigned to address labels, and one to
            generate the code.&nbsp; However, there is a complication<span
              style="font-weight: bold;"></span>, in that pseudo-ops
            like <span style="font-family: monospace;">EQUALS</span>
            (see the <a href="assembly_language_manual.html">assembly-language



              manual</a>) allow forward-references to other <span
              style="font-family: monospace;">EQUALS</span> pseudo-ops.
            For example, consider the following code fragment:<br>
            <br>
            <div style="margin-left: 40px;"><span style="font-family:
                monospace;">SYMBOL5&nbsp;&nbsp;&nbsp;
                EQUALS&nbsp;&nbsp;&nbsp; SYMBOL4</span><br
                style="font-family: monospace;">
              <span style="font-family: monospace;">SYMBOL4&nbsp;&nbsp;&nbsp;
EQUALS&nbsp;&nbsp;&nbsp;



                SYMBOL3</span><br style="font-family: monospace;">
              <span style="font-family: monospace;">SYMBOL3&nbsp;&nbsp;&nbsp;
EQUALS&nbsp;&nbsp;&nbsp;



                SYMBOL2</span><br style="font-family: monospace;">
              <span style="font-family: monospace;">SYMBOL2&nbsp;&nbsp;&nbsp;
EQUALS&nbsp;&nbsp;&nbsp;



                SYMBOL1</span><br style="font-family: monospace;">
              <span style="font-family: monospace;">SYMBOL1&nbsp;&nbsp;&nbsp;
EQUALS&nbsp;&nbsp;&nbsp;



                42</span><br>
            </div>
            <br>
            In this example, the value of <span style="font-family:
              monospace;">SYMBOL1</span> isn't known until the end of
            pass 1, the value of <span style="font-family: monospace;">SYMBOL2</span>
            isn't known until the end of pass 2, and so on. There is no
            practical limit to the number of passes needed&mdash;if symbol
            resolution is handled in a straightforward way&mdash;because it
            depends on how many constructs like those above appear
            within the assembly-language source code.&nbsp; Besides,
            this simple-minded use of multiple passes is eerily
            reminiscent of certain behaviors of the original <span
              style="font-weight: bold;">YUL</span> assembler, as
            evidenced by the following amusing quote from Hugh
            Blair-Smith (<span style="font-weight: bold;">YUL</span>'s
            author):<br>
            <br>
            <div style="margin-left: 40px;"><small>"... [the]
                observation about assemblies being so long that they
                were performed as overnight batch jobs, brings me to a
                confession of one thing I wish I had done better, and I
                really think I could have at the time. When it became
                clear, early in the project, that the number of words in
                AGC memory was going to be greater than the number of
                words in the assembling machine's (i.e., the Honeywell
                800/1800's) memory, I gave up any attempt to retain the
                object program in memory and just wrote each patch of
                object code on tape. Then there was a "third "pass of
                the assembly process which sorted the object code by
                what is perhaps the dumbest sort algorithm possible:
                running that tape back and forth and writing the object
                code in its proper order on another tape. As long as
                programs were just a few thousand instructions, this
                went like the wind, but the full-size programs of 36000
                or so instructions made Pass 3 pretty boring and
                frustrating to watch. We did have a hard disk drive from
                1965 or 1966, so I could and should have written my
                object code onto that and read off the sorted code in a
                flash. There wasn't anything like DOS to keep disk files
                out of each other's hair, so this effort would have
                involved learning and overcoming some risks of data
                getting stepped on. And there were always other little
                enhancements that had to be done, so it wouldn't have
                been easy&mdash;but I still wish I'd found a way to get it
                done. I guess one thing that decreased the motivation
                was that each assembly had to be printed, in about 3 or
                4 hours on the noisy 600 line-per-minute printer, so
                there wasn't anything the disk could do about assembly
                being an overnight batch process. I had no notion, at
                the time, of assembling modules separately and then
                linking the object modules, and the long and difficult
                history of PC linkers suggests that it wouldn't have
                been a good idea to try it even if I had thought of it."</small><br>
            </div>
            <br>
            This quote was taken from conference transcripts at MIT's
            Dibner Institute's now-discontinued History of Recent
            Science and Technology website.<br>
          </td>
        </tr>
      </tbody>
    </table>
    <p> </p>
    There are some additional options available for certain specialized
    purposes, which you can view with "yaYUL --help".<br>
    <br>
    <h2><a name="Apollo_Source-Code_Naming"></a>Apollo Source-Code
      Naming</h2>
    In the case of each of the original Apollo programs provided by this
    project, the main source-code file will be named MAIN.agc, and will
    be located in a directory appropriate to that particular program
    (Luminary131, Colossus249, or whatever).&nbsp; For example, to
    assemble the Luminary (rev. 131) source-code I provide, the
    appropriate steps (in Linux) might be<br>
    <br>
    <div style="margin-left: 40px;"><span style="font-family:
        monospace;">cd Luminary131</span><br style="font-family:
        monospace;">
      <span style="font-family: monospace;">yaYUL MAIN.agc
        &gt;Luminary131.lst</span><br style="font-family: monospace;">
      <span style="font-family: monospace;">mv MAIN.agc.bin
        Luminary131.bin<br>
        mv MAIN.agc.symtab Luminary131.symtab<br>
      </span></div>
    <br>
    (In MS-Windows, use "rename" rather than "mv" in the last line
    above.)<br>
    <h2><a name="AGC4_Assembly_Language"></a>AGC4 Assembly Language</h2>
    For a full explanation of the formatting of assembly-language files,
    and of available AGC4 assembly-language instructions, refer to the
    separately-provided <a href="assembly_language_manual.html">assembly-language



      manual</a>.&nbsp; Anyone who's determined to write AGC4
    assembly-language will probably also need to consult the <a
      href="developer.html">developer-info page</a>, which covers
    important supplementary topics such as the relationships between
    "i/o channels" and hardware peripherals.&nbsp; For the latter
    information, however, comments within <span style="font-weight:
      bold;">Luminary</span>/<span style="font-weight: bold;">Colossus</span>
    source code are the definitive references.<br>
    <br>
    <hr style="width: 100%; height: 2px;">
    <center><i><font size="-1">Last modified by <a
            href="mailto:info@sandroid.org">Ronald Burkey</a> on
          2016-08-24.<br>
          <br>
          <a href="http://www.ibiblio.org"><img style="border: 0px solid
              ; width: 300px; height: 100px;" alt="Virtual AGC is hosted
              by ibiblio.org" src="hosted.png" height="100" width="300"></a><br>
        </font></i></center>
    <br>
    <br>
  </body>
</html>
