<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
059880,000001:                                                                                                 <span class="co">#  Copyright:     Public domain.</span>
059881,000002:                                                                                                 <span class="co">#  Filename:      DAP_INTERFACE_SUBROUTINES.agc</span>
059882,000003:                                                                                                 <span class="co">#  Purpose:       Part of the source code for Luminary 1A build 099.</span>
059883,000004:                                                                                                 <span class="co">#                 It is part of the source code for the Lunar Module's (LM)</span>
059884,000005:                                                                                                 <span class="co">#                 Apollo Guidance Computer (AGC), for Apollo 11.</span>
059885,000006:                                                                                                 <span class="co">#  Assembler:     yaYUL</span>
059886,000007:                                                                                                 <span class="co">#  Contact:       Ron Burkey &lt;info@sandroid.org>.</span>
059887,000008:                                                                                                 <span class="co">#  Website:       www.ibiblio.org/apollo.</span>
059888,000009:                                                                                                 <span class="co">#  Pages: 1406-1409</span>
059889,000010:                                                                                                 <span class="co">#  Mod history:  2009-05-10 SN   (Sergio Navarro).  Started adapting</span>
059890,000011:                                                                                                 <span class="co">#                                 from the Luminary131/ file of the same</span>
059891,000012:                                                                                                 <span class="co">#                                 name, using Luminary099 page images.</span>
059892,000013: 
059893,000014:                                                                                                 <span class="co">#  This source code has been transcribed or otherwise adapted from</span>
059894,000015:                                                                                                 <span class="co">#  digitized images of a hardcopy from the MIT Museum.  The digitization</span>
059895,000016:                                                                                                 <span class="co">#  was performed by Paul Fjeld, and arranged for by Deborah Douglas of</span>
059896,000017:                                                                                                 <span class="co">#  the Museum.  Many thanks to both.  The images (with suitable reduction</span>
059897,000018:                                                                                                 <span class="co">#  in storage size and consequent reduction in image quality as well) are</span>
059898,000019:                                                                                                 <span class="co">#  available online at www.ibiblio.org/apollo.  If for some reason you</span>
059899,000020:                                                                                                 <span class="co">#  find that the images are illegible, contact me at info@sandroid.org</span>
059900,000021:                                                                                                 <span class="co">#  about getting access to the (much) higher-quality images which Paul</span>
059901,000022:                                                                                                 <span class="co">#  actually created.</span>
059902,000023: 
059903,000024:                                                                                                 <span class="co">#  Notations on the hardcopy document read, in part:</span>
059904,000025: 
059905,000026:                                                                                                 <span class="co">#         Assemble revision 001 of AGC program LMY99 by NASA 2021112-61</span>
059906,000027:                                                                                                 <span class="co">#         16:27 JULY 14, 1969 </span>
059907,000028: 
059908,000029:                                                                                                 <span class="co">#  Page 1406</span>
059909,000030: 20,2123                                          <span class="ps">BANK    </span> 20                                    
059910,000031: 20,2000                                          <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#4441505333">DAPS3</a>                                 
059911,000032: 20,2000                                          <span class="ps">BANK    </span>                                       
059912,000033: 
059913,000034: 20,2123  E6,1635                                 <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4344555844">CDUXD</a>                                 
059914,000035: 20,2123                                          <span class="ps">COUNT*  </span> $$/DAPIF                              
059915,000036: 
059916,000037:                                                                                                 <span class="co">#  MOD 0          DATE    11/15/66        BY GEORGE W. CHERRY</span>
059917,000038:                                                                                                 <span class="co">#  MOD 1                   1/23/67        MODIFICATION BY PETER ADLER</span>
059918,000039: 
059919,000040:                                                                                                 <span class="co">#  FUNCTIONAL DESCRIPTION</span>
059920,000041:                                                                                                 <span class="co">#         HEREIN IS A COLLECTION OF SUBROUTINES WHICH ALLOW MISSION CONTROL PROGRAMS TO CONTROL THE MODE</span>
059921,000042:                                                                                                 <span class="co">#         AND INTERFACE WITH THE DAP.</span>
059922,000043: 
059923,000044:                                                                                                 <span class="co">#  CALLING SEQUENCES</span>
059924,000045:                                                                                                 <span class="co">#         IN INTERRUPT OR WITH INTERRUPT INHIBITED</span>
059925,000046:                                                                                                 <span class="co">#                 TC      IBNKCALL</span>
059926,000047:                                                                                                 <span class="co">#                 FCADR   ROUTINE</span>
059927,000048:                                                                                                 <span class="co">#         IN A JOB WITHOUT INTERRUPT INHIBITED</span>
059928,000049:                                                                                                 <span class="co">#                 INHINT</span>
059929,000050:                                                                                                 <span class="co">#                 TC      IBNKCALL</span>
059930,000051:                                                                                                 <span class="co">#                 FCADR   ROUTINE</span>
059931,000052:                                                                                                 <span class="co">#                 RELINT</span>
059932,000053: 
059933,000054:                                                                                                 <span class="co">#  OUTPUT</span>
059934,000055:                                                                                                 <span class="co">#         SEE INDIVIDUAL ROUTINES BELOW</span>
059935,000056: 
059936,000057:                                                                                                 <span class="co">#  DEBRIS</span>
059937,000058:                                                                                                 <span class="co">#         A, L, AND SOMETIMES MDUETEMP                    ODE     NOT IN PULSES MODE</span>
059938,000059: 
059939,000060:                                                                                                 <span class="co">#  Page 1407</span>
059940,000061:                                                                                                 <span class="co">#  SUBROUTINE NAMES:</span>
059941,000062:                                                                                                 <span class="co">#         SETMAXDB, SETMINDB, RESTORDB, PFLITEDB</span>
059942,000063:                                                                                                 <span class="co">#  MODIFIED:      30 JANUARY 1968 BY P. S. WEISSMAN TO CREATE RESTORDB.</span>
059943,000064:                                                                                                 <span class="co">#  MODIFIED:      1 MARCH 1968 BY P. S. WEISSMAN TO SAVE EBANK AND CREATE PFLITEDB</span>
059944,000065: 
059945,000066:                                                                                                 <span class="co">#  FUNCTIONAL DESCRIPTION:</span>
059946,000067:                                                                                                 <span class="co">#         SETMAXDB -- SET DEADBAND TO 5.0 DEGREES</span>
059947,000068:                                                                                                 <span class="co">#         SETMINDB -- SET DEADBAND TO 0.3 DEGREE</span>
059948,000069:                                                                                                 <span class="co">#         RESTORDB -- SET DEADBAND TO MAX OR MIN ACCORDING TO SETTINGS OF DBSELECT BIT OF DAPBOOLS</span>
059949,000070:                                                                                                 <span class="co">#         PFLITEDB -- SET DEADBAND TO 1.0 DEGREE AND ZERO THE COMMANDED ATTITUDE CHANGE AND COMMANDED RATE</span>
059950,000071: 
059951,000072:                                                                                                 <span class="co">#         ALL ENTRIES SET UP A NOVAC JOB TO DO 1/ACCS SO THAT THE TJETLAW SWITCH CURVES ARE POSITIONED TO</span>
059952,000073:                                                                                                 <span class="co">#         REFLECT TEH NEW DEADBAND.  IT SHOULD BE NOTED THAT THE DEADBAND REFERS TO THE ATTITUDE IN THE P-, U-, AND V-AXES.</span>
059953,000074: 
059954,000075:                                                                                                 <span class="co">#  SUBROUTINE CALLED:     NOVAC</span>
059955,000076: 
059956,000077:                                                                                                 <span class="co">#  CALLING SEQUENCE:      SAME AS ABOVE</span>
059957,000078:                                                                                                 <span class="co">#                         OR      TC RESTORDB +1    FROM ALLCOAST</span>
059958,000079: 
059959,000080:                                                                                                 <span class="co">#  DEBRIS:                A, L, Q, RUPTREG1, (ITEMPS IN NOVAC)</span>
059960,000081: 
<a name="524553544F524442"></a>059961,000082: 20,2123           30111        <span class="sm">RESTORDB</span>          <span class="op">CAE     </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#444150424F4F4C53">DAPBOOLS</a>                              <span class="co">#  DETERMINE CREW-SELECTED DEADBAND.</span>
059962,000083: 20,2124           74750                          <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#444253454C454354">DBSELECT</a>                              
059963,000084: 20,2125           00006                          <span class="op">EXTEND  </span>                                       
059964,000085: 20,2126           12140                          <span class="op">BZF     </span> <a href="#5345544D494E4442">SETMINDB</a>                              
059965,000086: 
<a name="5345544D41584442"></a>059966,000087: 20,2127           32151        <span class="sm">SETMAXDB</span>          <span class="op">CAF     </span> <a href="#574944454442">WIDEDB</a>                                <span class="co">#  SET 5 DEGREE DEADBAND.</span>
059967,000088: 20,2130           55346                 +1       <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4442">DB</a>                                    
059968,000089: 
059969,000090: 20,2131           00006                          <span class="op">EXTEND  </span>                                       <span class="co">#  SET UP JOB TO RE-POSITION SWITCH CURVES.</span>
059970,000091: 20,2132           22070                          <span class="op">QXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454731">RUPTREG1</a>                              
<a name="43414C4C41434353"></a>059971,000092: 20,2133           37715        <span class="sm">CALLACCS</span>          <span class="op">CAF     </span> <a href="FIXED_FIXED_CONSTANT_POOL.agc.html#5052494F3237">PRIO27</a>                                
059972,000093: 20,2134           05072                          <span class="op">TC      </span> <a href="EXECUTIVE.agc.html#4E4F564143">NOVAC</a>                                 
059973,000094: 20,2135  E6,1537                                 <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414F5351">AOSQ</a>                                  
059974,000095: 20,2135           02454 40106                    <span class="ps">2CADR   </span> <a href="AOSTASK_AND_AOSJOB.agc.html#312F4143434A4F42">1/ACCJOB</a>                              
059975,000096: 
059976,000097: 20,2137           00070                          <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454731">RUPTREG1</a>                              <span class="co">#  RETURN TO CALLER.</span>
059977,000098: 
<a name="5345544D494E4442"></a>059978,000099: 20,2140           32150        <span class="sm">SETMINDB</span>          <span class="op">CAF     </span> <a href="#4E4152524F574442">NARROWDB</a>                              <span class="co">#  SET 0.3 DEGREE DEADBAND.</span>
059979,000100: 20,2141           12130                          <span class="op">TCF     </span> <a href="#5345544D41584442">SETMAXDB</a>   +1                         
059980,000101: 
<a name="50464C4954454442"></a>059981,000102: 20,2142           00006        <span class="sm">PFLITEDB</span>          <span class="op">EXTEND  </span>                                       <span class="co">#  THE RETURN FROM CALLACCS IS TO RUPTREG1.</span>
059982,000103: 20,2143           22070                          <span class="op">QXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454731">RUPTREG1</a>                              
059983,000104: 20,2144           02153                          <span class="op">TC      </span> <a href="#5A41545445524F52">ZATTEROR</a>                              <span class="co">#  ZERO THE ERRORS AND COMMANDED RATES.</span>
059984,000105: 20,2145           32152                          <span class="op">CAF     </span> <a href="#504F5745524442">POWERDB</a>                               <span class="co">#  SET DB TO 1.0 DEG.</span>
059985,000106: 20,2146           55346                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4442">DB</a>                                    
059986,000107: 20,2147           12133                          <span class="op">TCF     </span> <a href="#43414C4C41434353">CALLACCS</a>                              <span class="co">#  SET UP 1/ACCS AND RETURN TO CALLER.</span>
<a name="4E4152524F574442"></a>059987,000108: 20,2150           00155        <span class="sm">NARROWDB</span>          <span class="ps">OCTAL   </span> 00155                                 <span class="co">#  0.3 DEGREE SCALED AT 45.</span>
059988,000109:                                                                                                 <span class="co">#  Page 1408</span>
<a name="574944454442"></a>059989,000110: 20,2151           03434        <span class="sm">WIDEDB  </span>          <span class="ps">OCTAL   </span> 03434                                 <span class="co">#  5.0 DEGREES SCALED AT 45.</span>
<a name="504F5745524442"></a>059990,000111: 20,2152           00554        <span class="sm">POWERDB </span>          <span class="ps">DEC     </span> .02222                                <span class="co">#  1.0 DEGREE SCALED AT 45.</span>
059991,000112: 
<a name="5A41545445524F52"></a>059992,000113: 20,2153           35015        <span class="sm">ZATTEROR</span>          <span class="op">CAF     </span> <a href="FIXED_FIXED_CONSTANT_POOL.agc.html#4542414E4B36">EBANK6</a>                                
059993,000114: 20,2154           56003                          <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542414E4B">EBANK</a>                                 
059994,000115: 20,2155           54001                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     <span class="co">#  SAVE CALLERS EBANK IN L.</span>
059995,000116: 20,2156           30032                          <span class="op">CAE     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#43445558">CDUX</a>                                  
059996,000117: 20,2157           55635                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4344555844">CDUXD</a>                                 
059997,000118: 20,2160           30033                          <span class="op">CAE     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#43445559">CDUY</a>                                  
059998,000119: 20,2161           55636                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4344555944">CDUYD</a>                                 
059999,000120: 20,2162           30034                          <span class="op">CAE     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4344555A">CDUZ</a>                                  
060000,000121: 20,2163           55637                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4344555A44">CDUZD</a>                                 
060001,000122: 20,2164           12170                          <span class="op">TCF     </span> <a href="#53544F5052415445">STOPRATE</a>   +3                         
060002,000123: 
<a name="53544F5052415445"></a>060003,000124: 20,2165           35015        <span class="sm">STOPRATE</span>          <span class="op">CAF     </span> <a href="FIXED_FIXED_CONSTANT_POOL.agc.html#4542414E4B36">EBANK6</a>                                
060004,000125: 20,2166           56003                          <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542414E4B">EBANK</a>                                 
060005,000126: 20,2167           54001                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     <span class="co">#  SAVE CALLERS EBANK IN L.</span>
060006,000127: 20,2170           34755                 +3       <span class="op">CAF     </span> <a href="FIXED_FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
060007,000128: 20,2171           55643                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4F4D4547415044">OMEGAPD</a>                               
060008,000129: 20,2172           55644                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4F4D4547415144">OMEGAQD</a>                               
060009,000130: 20,2173           55645                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4F4D4547415244">OMEGARD</a>                               
060010,000131: 20,2174           55640                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C43445558">DELCDUX</a>                               
060011,000132: 20,2175           55641                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C43445559">DELCDUY</a>                               
060012,000133: 20,2176           55642                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C4344555A">DELCDUZ</a>                               
060013,000134: 20,2177           55277                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5045524F52">DELPEROR</a>                              
060014,000135: 20,2200           55300                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5145524F52">DELQEROR</a>                              
060015,000136: 20,2201           55301                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5245524F52">DELREROR</a>                              
060016,000137: 20,2202           22003                          <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542414E4B">EBANK</a>                                 <span class="co">#  RESTORE CALLERS EBANK.</span>
060017,000138: 20,2203           00002                          <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
060018,000139: 
060019,000140:                                                                                                 <span class="co">#  SUBROUTINE NAME:       ALLCOAST</span>
060020,000141:                                                                                                 <span class="co">#  WILL BE CALLED BY FRESH STARTS AND ENGINE OFF ROUTINES.</span>
060021,000142: 
060022,000143:                                                                                                 <span class="co">#  CALLING SEQUENCE:      (SAME AS ABOVE)</span>
060023,000144: 
060024,000145:                                                                                                 <span class="co">#  EXIT:                  RETURN TO Q.</span>
060025,000146: 
060026,000147:                                                                                                 <span class="co">#  SUBROUTINES CALLED:    STOPRATE, RESTORDB, NOVAC</span>
060027,000148: 
060028,000149:                                                                                                 <span class="co">#  ZERO:                  (FOR ALL AXES) AOS, ALPHA, AOSTERM, OMEGAD, DELCDU, DELEROR</span>
060029,000150: 
060030,000151:                                                                                                 <span class="co">#  OUTPUT:                DRIFTBIT/DAPBOOLS, OE, JOB TO DO 1/ACCS</span>
060031,000152: 
060032,000153:                                                                                                 <span class="co">#  DEBRIS:                A, L, Q, RUPTREG1, RUPTREG2, (ITEMPS IN NOVAC)</span>
060033,000154: 
<a name="414C4C434F415354"></a>060034,000155: 20,2204           00006        <span class="sm">ALLCOAST</span>          <span class="op">EXTEND  </span>                                       <span class="co">#  SAVE Q FOR RETURN</span>
060035,000156: 20,2205           22071                          <span class="op">QXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454732">RUPTREG2</a>                              
060036,000157:                                                                                                 <span class="co">#  Page 1409</span>
060037,000158: 20,2206           02165                          <span class="op">TC      </span> <a href="#53544F5052415445">STOPRATE</a>                              <span class="co">#  CLEAR RATE INTERFACE.  RETURN WITH A=0</span>
060038,000159: 20,2207           22003                          <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542414E4B">EBANK</a>                                 <span class="co">#  AND L=EBANK6.  SAVE CALLER'S EBANK.</span>
060039,000160: 20,2210           55537                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414F5351">AOSQ</a>                                  
060040,000161: 20,2211           55540                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414F5351">AOSQ</a>       +1                         
060041,000162: 20,2212           55541                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414F5352">AOSR</a>                                  
060042,000163: 20,2213           55542                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414F5352">AOSR</a>       +1                         
060043,000164: 20,2214           55424                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484151">ALPHAQ</a>                                <span class="co">#  FOR DOWNLIST.</span>
060044,000165: 20,2215           55425                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484152">ALPHAR</a>                                
060045,000166: 20,2216           55545                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414F53515445524D">AOSQTERM</a>                              
060046,000167: 20,2217           55546                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414F53525445524D">AOSRTERM</a>                              
060047,000168: 20,2220           22003                          <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542414E4B">EBANK</a>                                 <span class="co">#  RESTORE EBANK (EBANK6 NO LONGER NEEDED)</span>
060048,000169: 
060049,000170: 20,2221           40111                          <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#444150424F4F4C53">DAPBOOLS</a>                              <span class="co">#  SET UP DRIFTBIT</span>
060050,000171: 20,2222           74744                          <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#4452494654424954">DRIFTBIT</a>                              
060051,000172: 20,2223           26111                          <span class="op">ADS     </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#444150424F4F4C53">DAPBOOLS</a>                              
060052,000173: 20,2224           02124                          <span class="op">TC      </span> <a href="#524553544F524442">RESTORDB</a>   +1                         <span class="co">#  RESTORE DEADBANK TO CREW-SELECTED VALUE.</span>
060053,000174: 
060054,000175: 20,2225           00071                          <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454732">RUPTREG2</a>                              <span class="co">#  RETURN.</span>
060055,000176: 

End of include-file DAP_INTERFACE_SUBROUTINES.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
