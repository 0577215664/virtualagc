<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
034886,000001:                                                                                                 <span class="co">#  Copyright:    Public domain.</span>
034887,000002:                                                                                                 <span class="co">#  Filename:     LUNAR_AND_SOLAR_EPHEMERIDES_SUBROUTINES.agc</span>
034888,000003:                                                                                                 <span class="co">#  Purpose:      Part of the source code for Comanche, build 055. It</span>
034889,000004:                                                                                                 <span class="co">#                is part of the source code for the Command Module's</span>
034890,000005:                                                                                                 <span class="co">#                (CM) Apollo Guidance Computer (AGC), Apollo 11.</span>
034891,000006:                                                                                                 <span class="co">#  Assembler:    yaYUL</span>
034892,000007:                                                                                                 <span class="co">#  Reference:    pp. 785-788</span>
034893,000008:                                                                                                 <span class="co">#  Contact:      Ron Burkey &lt;info@sandroid.org></span>
034894,000009:                                                                                                 <span class="co">#  Website:      http://www.ibiblio.org/apollo.</span>
034895,000010:                                                                                                 <span class="co">#  Mod history:  2009-05-12 RSB   Adapted from Colossus249 file of the same</span>
034896,000011:                                                                                                 <span class="co">#                                 name and Comanche 055 page images.</span>
034897,000012:                                                                                                 <span class="co">#                 2009-07-26 RSB  Added annotations related to computation</span>
034898,000013:                                                                                                 <span class="co">#                                 of the ephemeral(?) polynomials.</span>
034899,000014: 
034900,000015:                                                                                                 <span class="co">#  The contents of the "Comanche055" files, in general, are transcribed </span>
034901,000016:                                                                                                 <span class="co">#  from scanned documents. </span>
034902,000017: 
034903,000018:                                                                                                 <span class="co">#        Assemble revision 055 of AGC program Comanche by NASA</span>
034904,000019:                                                                                                 <span class="co">#        2021113-051.  April 1, 1969.  </span>
034905,000020: 
034906,000021:                                                                                                 <span class="co">#        This AGC program shall also be referred to as Colossus 2A</span>
034907,000022: 
034908,000023:                                                                                                 <span class="co">#        Prepared by</span>
034909,000024:                                                                                                 <span class="co">#                        Massachussets Institute of Technology</span>
034910,000025:                                                                                                 <span class="co">#                        75 Cambridge Parkway</span>
034911,000026:                                                                                                 <span class="co">#                        Cambridge, Massachusetts</span>
034912,000027: 
034913,000028:                                                                                                 <span class="co">#        under NASA contract NAS 9-4065.</span>
034914,000029: 
034915,000030:                                                                                                 <span class="co">#  Refer directly to the online document mentioned above for further</span>
034916,000031:                                                                                                 <span class="co">#  information.  Please report any errors to info@sandroid.org.</span>
034917,000032: 
034918,000033:                                                                                                 <span class="co">#  Page 785</span>
034919,000034:                                                                                                 <span class="co">#  LUNAR AND SOLAR EPHEMERIDES SUBROUTINES</span>
034920,000035: 
034921,000036:                                                                                                 <span class="co">#  FUNCTIONAL DESCRIPTION</span>
034922,000037: 
034923,000038:                                                                                                 <span class="co">#         THESE SUBROUTINES ARE USED TO DETERMINE THE POSITION AND VELOCITY</span>
034924,000039:                                                                                                 <span class="co">#         VECTORS OF THE SUN AND THE MOON RELATIVE TO THE EARTH AT THE</span>
034925,000040:                                                                                                 <span class="co">#         SPECIFIED GROUND ELAPSED TIME INPUT BY THE USER.</span>
034926,000041: 
034927,000042:                                                                                                 <span class="co">#         THE POSITION OF THE MOON IS STORED IN THE COMPUTER IN THE FORM OF</span>
034928,000043:                                                                                                 <span class="co">#         A NINTH DEGREE POLYNOMIAL APPROXIMATION WHICH IS VALID OVER A 15</span>
034929,000044:                                                                                                 <span class="co">#         DAY INTERVAL BEGINNING SHORTLY BEFORE LAUNCH.  THEREFORE THE TIME</span>
034930,000045:                                                                                                 <span class="co">#         INPUT BY THE USER SHOULD FALL WITHIN THIS 15 DAY INTERVAL.</span>
034931,000046:                                                                                                 <span class="co"># #       The 9th-degree polynomial spoken of here is a pad load, meaning</span>
034932,000047:                                                                                                 <span class="co"># #       that it is not actually hardcoded into the software.  Additional</span>
034933,000048:                                                                                                 <span class="co"># #       information about calculating the polynomial can be found on the </span>
034934,000049:                                                                                                 <span class="co"># #       &lt;a href="http://nassp.sourceforge.net/wiki/Lunar_Ephemeris_Polynomials"></span>
034935,000050:                                                                                                 <span class="co"># #       &lt;b>Orbiter&lt;/b> NASSP wiki&lt;/a>, as well as information about calculation</span>
034936,000051:                                                                                                 <span class="co"># #       of the &lt;a href="http://nassp.sourceforge.net/wiki/Solar_Ephemeris"></span>
034937,000052:                                                                                                 <span class="co"># #       solar ephemerides&lt;/a>.</span>
034938,000053: 
034939,000054:                                                                                                 <span class="co">#         LSPOS COMPUTES THE POSITION VECTORS OF THE SUN AND THE MOON.</span>
034940,000055: 
034941,000056:                                                                                                 <span class="co">#         LUNPOS COMPUTES THE POSITION VECTOR OF THE MOON.</span>
034942,000057: 
034943,000058:                                                                                                 <span class="co">#         LUNVEL COMPUTES THE VELOCITY VECTOR OF THE MOON.</span>
034944,000059: 
034945,000060:                                                                                                 <span class="co">#         SOLPOS COMPUTES THE POSITION VECTOR OF THE SUN.</span>
034946,000061: 
034947,000062:                                                                                                 <span class="co">#  CALLING SEQUENCE</span>
034948,000063: 
034949,000064:                                                                                                 <span class="co">#         DLOAD   CALL</span>
034950,000065:                                                                                                 <span class="co">#                 TIME            GROUND ELAPSED TIME</span>
034951,000066:                                                                                                 <span class="co">#                 SUBROUTINE      LSPOS OR LUNPOS OR LUNVEL OR SOLPOS</span>
034952,000067: 
034953,000068:                                                                                                 <span class="co">#  INPUT</span>
034954,000069: 
034955,000070:                                                                                                 <span class="co">#         1) SPECIFIED GROUND ELAPSED TIME IN CS x B-28 LOADED IN MPAC.</span>
034956,000071: 
034957,000072:                                                                                                 <span class="co">#         2) TIMEMO -- TIME AT THE CENTER OF THE RANGE OVER WHICH THE LUNAR</span>
034958,000073:                                                                                                 <span class="co">#         POSITION POLYNOMIAL IS VALID IN CS x B-42.</span>
034959,000074: 
034960,000075:                                                                                                 <span class="co">#         3) VECOEM -- VECTOR COEFFICIENTS OF THE LUNAR POSITION POLYNOMIAL</span>
034961,000076:                                                                                                 <span class="co">#         LOADED IN DESCENDING SEQUENCE IN METERS/CS**N x B-2</span>
034962,000077: 
034963,000078:                                                                                                 <span class="co">#         4) RESO -- POSITION VECTOR OF THE SUN RELATIVE TO THE EARTH AT</span>
034964,000079:                                                                                                 <span class="co">#         TIMEMO IN METERS x B-38</span>
034965,000080: 
034966,000081:                                                                                                 <span class="co">#         5) VESO -- VELOCITY VECTOR OF THE SUN RELATIVE TO THE EARTH AT</span>
034967,000082:                                                                                                 <span class="co">#         TIMEMO IN METERS/CS x B-9</span>
034968,000083:                                                                                                 <span class="co">#  </span>
034969,000084:                                                                                                 <span class="co">#         6) OMEGAES -- ANGULAR VELOCITY OF THE VECTOR RESO AT TIMEMO IN</span>
034970,000085:                                                                                                 <span class="co">#         REV/CS x B+26</span>
034971,000086: 
034972,000087:                                                                                                 <span class="co">#         ALL EXCEPT THE FIRST INPUT ARE INCLUDED IN THE PRE-LAUNCH</span>
034973,000088:                                                                                                 <span class="co">#         ERASABLE DATA LOAD.</span>
034974,000089: 
034975,000090:                                                                                                 <span class="co">#  OUTPUT -- LSPOS</span>
034976,000091:                                                                                                 <span class="co">#  Page 786</span>
034977,000092: 
034978,000093:                                                                                                 <span class="co">#         1) 2D OF VAC AREA CONTAINS THE POSITION VECTOR OF THE SUN RELATIVE</span>
034979,000094:                                                                                                 <span class="co">#         TO THE EARTH AT TIME INPUT BY THE USER IN METERS x B-38.</span>
034980,000095: 
034981,000096:                                                                                                 <span class="co">#         2) MPAC CONTAINS THE POSITION VECTOR OF THE MOON RELATIVE TO THE</span>
034982,000097:                                                                                                 <span class="co">#         EARTH AT TIME INPUT BY THE USER IN METERS x B-29</span>
034983,000098: 
034984,000099:                                                                                                 <span class="co">#  OUTPUT -- LUNPOS</span>
034985,000100: 
034986,000101:                                                                                                 <span class="co">#         MPAC CONTAINS THE POSITION VECTOR OF THE MOON RELATIVE TO THE</span>
034987,000102:                                                                                                 <span class="co">#         EARTH AT THE TIME INPUT BY USER IN METERS x B-29</span>
034988,000103: 
034989,000104:                                                                                                 <span class="co">#  OUTPUT -- LUNVEL</span>
034990,000105: 
034991,000106:                                                                                                 <span class="co">#         MPAC CONTAINS THE VELOCITY VECTOR OF THE MOON RELATIVE TO THE</span>
034992,000107:                                                                                                 <span class="co">#         EARTH AT THE TIME INPUT BY THE USER IN METERS/CS x B-7</span>
034993,000108: 
034994,000109:                                                                                                 <span class="co">#  OUTPUT -- SOLPOS</span>
034995,000110: 
034996,000111:                                                                                                 <span class="co">#         MPAC CONTAINS THE POSITION VECTOR OF THE SUN RELATIVE TO THE EARTH</span>
034997,000112:                                                                                                 <span class="co">#         AT TIME INPUT BY THE USER IN METERS x B-38.</span>
034998,000113: 
034999,000114:                                                                                                 <span class="co">#  SUBROUTINES USED</span>
035000,000115: 
035001,000116:                                                                                                 <span class="co">#         NONE</span>
035002,000117: 
035003,000118:                                                                                                 <span class="co">#  REMARKS</span>
035004,000119: 
035005,000120:                                                                                                 <span class="co">#         THE VAC AREA IS USED FOR STORAGE OF INTERMEDIATE AND FINAL RESULTS</span>
035006,000121:                                                                                                 <span class="co">#         OF COMPUTATIONS.</span>
035007,000122: 
035008,000123:                                                                                                 <span class="co">#         S1, X1, AND X2 ARE USED BY THESE SUBROUTINES.</span>
035009,000124: 
035010,000125:                                                                                                 <span class="co">#         PRELAUNCH ERASABLE DATA LOAD ARE ONLY ERASABLE STORAGE USED BY</span>
035011,000126:                                                                                                 <span class="co">#         THESE SUBROUTINES.</span>
035012,000127: 
035013,000128:                                                                                                 <span class="co">#         RESTARTS DURING OPERATION OF THESE SUBROUTINES MUST BE HANDLED BY</span>
035014,000129:                                                                                                 <span class="co">#         THE USER.</span>
035015,000130: 
035016,000131: 36,2466                                          <span class="ps">BANK    </span> 36                                    
035017,000132: 26,2000                                          <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#455048454D">EPHEM</a>                                 
035018,000133: 26,2000                                          <span class="ps">BANK    </span>                                       
035019,000134: 
035020,000135: 26,2110                                          <span class="ps">COUNT*  </span> $$/<a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#455048454D">EPHEM</a>                              
035021,000136: 26,2110  E7,1777                                 <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#454E442D4537">END-E7</a>                                
<a name="4C53504F53"></a>035022,000137: 26,2110           77774        <span class="sm">LSPOS   </span>          <span class="in">AXT,2   </span>                                       <span class="co">#  COMPUTES POSITION VECTORS OF BOTH THE</span>
035023,000138: 26,2111           54161                                   <a href="#52455341">RESA</a>                                  <span class="co">#  SUN AND THE MOON.  THE POSITION VECTOR</span>
035024,000139: 26,2112           52170                          <span class="in">AXT,1   </span> <span class="in">GOTO      </span>                            <span class="co">#  OF THE SUN IS STORED IN 2D OF THE VAC</span>
035025,000140: 26,2113           54143                                   <a href="#524553">RES</a>                                   <span class="co">#  AREA.  THE POSITION VECTOR OF THE MOON</span>
035026,000141: 26,2114           54126                                   <a href="#4C5354494D45">LSTIME</a>                                <span class="co">#  IS STORED IN MPAC.</span>
<a name="4C554E504F53"></a>035027,000142: 26,2115           52170        <span class="sm">LUNPOS  </span>          <span class="in">AXT,1   </span> <span class="in">GOTO      </span>                            <span class="co">#  COMPUTES THE POSITION VECTOR OF THE MOON</span>
035028,000143: 26,2116           54162                                   <a href="#52454D">REM</a>                                   <span class="co">#  AND STORES IT IN MPAC.</span>
035029,000144: 26,2117           54126                                   <a href="#4C5354494D45">LSTIME</a>                                
035030,000145:                                                                                                 <span class="co">#  Page 787</span>
<a name="4C554E56454C"></a>035031,000146: 26,2120           52170        <span class="sm">LUNVEL  </span>          <span class="in">AXT,1   </span> <span class="in">GOTO      </span>                            <span class="co">#  COMPUTES THE VELOCITY VECTOR OF THE MOON</span>
035032,000147: 26,2121           54173                                   <a href="#56454D">VEM</a>                                   <span class="co">#  AND STORES IT IN MPAC.</span>
035033,000148: 26,2122           54126                                   <a href="#4C5354494D45">LSTIME</a>                                
<a name="534F4C504F53"></a>035034,000149: 26,2123           76020        <span class="sm">SOLPOS  </span>          <span class="in">STQ     </span> <span class="in">AXT,1     </span>                            <span class="co">#  COMPUTES THE POSITION VECTOR OF THE SUN</span>
035035,000150: 26,2124           00047                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5832">X2</a>                                    <span class="co">#  AND STORES IT IN MPAC.</span>
035036,000151: 26,2125           54143                                   <a href="#524553">RES</a>                                   
<a name="4C5354494D45"></a>035037,000152: 26,2126           54201        <span class="sm">LSTIME  </span>          <span class="in">SETPD   </span> <span class="in">SR        </span>                            
035038,000153: 26,2127           00001                                   0D                                    
035039,000154: 26,2130           20617                                   14D                                   
035040,000155: 26,2131           57571                          <span class="in">TAD     </span> <span class="in">DCOMP     </span>                            
035041,000156: 26,2132           01707                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#54455048454D">TEPHEM</a>                                
035042,000157: 26,2133           57571                          <span class="in">TAD     </span> <span class="in">DCOMP     </span>                            
035043,000158: 26,2134           02034                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#54494D454D4F">TIMEMO</a>                                
035044,000159: 26,2135           66261                          <span class="in">SL      </span> <span class="in">SSP       </span>                            
035045,000160: 26,2136           20221                                   16D                                   
035046,000161: 26,2137           00051                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5331">S1</a>                                    
035047,000162: 26,2140           00006                                   6D                                    
035048,000163: 26,2141           77650                          <span class="in">GOTO    </span>                                       
035049,000164: 26,2142           00046                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5831">X1</a>                                    
<a name="524553"></a>035050,000165: 26,2143           41206        <span class="sm">RES     </span>          <span class="in">PUSH    </span> <span class="in">DMP       </span>                            <span class="co">#                                         PD- 2</span>
035051,000166: 26,2144           02147                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#4F4D4547414553">OMEGAES</a>                               
035052,000167: 26,2145           71406                          <span class="in">PUSH    </span> <span class="in">COS       </span>                            <span class="co">#                                         PD- 4</span>
035053,000168: 26,2146           65361                          <span class="in">VXSC    </span> <span class="in">PDDL      </span>                            <span class="co">#                                         PD- 8</span>
035054,000169: 26,2147           02133                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5245534F">RESO</a>                                  
035055,000170: 26,2150           63356                          <span class="in">SIN     </span> <span class="in">PDVL      </span>                            <span class="co">#                                         PD-10</span>
035056,000171: 26,2151           02133                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5245534F">RESO</a>                                  
035057,000172: 26,2152           53406                          <span class="in">PUSH    </span> <span class="in">UNIT      </span>                            <span class="co">#                                         PD-16</span>
035058,000173: 26,2153           53435                          <span class="in">VXV     </span> <span class="in">UNIT      </span>                            
035059,000174: 26,2154           02141                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5645534F">VESO</a>                                  
035060,000175: 26,2155           76435                          <span class="in">VXV     </span> <span class="in">VSL1      </span>                            <span class="co">#                                         PD-10</span>
035061,000176: 26,2156           53361                          <span class="in">VXSC    </span> <span class="in">VAD       </span>                            <span class="co">#                                         PD-02</span>
035062,000177: 26,2157           52172                          <span class="in">VSL1    </span> <span class="in">GOTO      </span>                            <span class="co">#  RES IN METERS x B-38 IN MPAC.</span>
035063,000178: 26,2160           00047                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5832">X2</a>                                    
<a name="52455341"></a>035064,000179: 26,2161           14003        <span class="sm">RESA    </span>          <span class="in">STODL   </span> 2D                                    <span class="co">#  RES IN METERS x B-38 IN 2D OF VAC.     PD- 0</span>
<a name="52454D"></a>035065,000180: 26,2162           63370        <span class="sm">REM     </span>          <span class="in">AXT,1   </span> <span class="in">PDVL      </span>                            <span class="co">#                                         PD- 2</span>
035066,000181: 26,2163           00066                                   54D                                   
035067,000182: 26,2164           02037                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5645434F454D">VECOEM</a>                                
<a name="52454D41"></a>035068,000183: 26,2165           52761        <span class="sm">REMA    </span>          <span class="in">VXSC    </span> <span class="in">VAD*      </span>                            
035069,000184: 26,2166           00001                                   0D                                    
035070,000185: 26,2167           02133                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5645434F454D">VECOEM</a>     +60D,1                     
035071,000186: 26,2170           72500                          <span class="in">TIX,1   </span> <span class="in">VSL2      </span>                            <span class="co">#  REM IN METERS x B-29 IN MPAC.</span>
035072,000187: 26,2171           54165                                   <a href="#52454D41">REMA</a>                                  
035073,000188: 26,2172           77616                          <span class="in">RVQ     </span>                                       
<a name="56454D"></a>035074,000189: 26,2173           65370        <span class="sm">VEM     </span>          <span class="in">AXT,1   </span> <span class="in">PDDL      </span>                            <span class="co">#                                         PD- 2</span>
035075,000190: 26,2174           00060                                   48D                                   
035076,000191: 26,2175           14214                                   <a href="#4E494E454234">NINEB4</a>                                
035077,000192: 26,2176           74206                          <span class="in">PUSH    </span> <span class="in">VXSC      </span>                            <span class="co">#                                         PD- 4</span>
035078,000193: 26,2177           02037                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5645434F454D">VECOEM</a>                                
<a name="56454D41"></a>035079,000194: 26,2200           77761        <span class="sm">VEMA    </span>          <span class="in">VXSC    </span>                                       
035080,000195: 26,2201           00001                                   0D                                    
035081,000196:                                                                                                 <span class="co">#  Page 788</span>
035082,000197: 26,2202           14005                          <span class="in">STODL   </span> 4D                                    <span class="co">#                                         PD- 2</span>
035083,000198: 26,2203           41425                          <span class="in">DSU     </span> <span class="in">PUSH      </span>                            <span class="co">#                                         PD- 4</span>
035084,000199: 26,2204           14216                                   <a href="#4F4E454234">ONEB4</a>                                 
035085,000200: 26,2205           53357                          <span class="in">VXSC*   </span> <span class="in">VAD       </span>                            
035086,000201: 26,2206           02125                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5645434F454D">VECOEM</a>     +54D,1                     
035087,000202: 26,2207           00005                                   4D                                    
035088,000203: 26,2210           72500                          <span class="in">TIX,1   </span> <span class="in">VSL2      </span>                            <span class="co">#  VEM IN METERS/CS x B-7 IN MPAC.</span>
035089,000204: 26,2211           54200                                   <a href="#56454D41">VEMA</a>                                  
035090,000205: 26,2212           77616                          <span class="in">RVQ     </span>                                       
<a name="4E494E454234"></a>035091,000206: 26,2213           22000 00000  <span class="sm">NINEB4  </span>          <span class="ps">2DEC    </span> 9.0        B-4                        
035092,000207: 
<a name="4F4E454234"></a>035093,000208: 26,2215           02000 00000  <span class="sm">ONEB4   </span>          <span class="ps">2DEC    </span> 1.0        B-4                        
035094,000209: 
035095,000210: 
035096,000211: 

End of include-file LUNAR_AND_SOLAR_EPHEMERIDES_SUBROUTINES.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
