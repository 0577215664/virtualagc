<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files were transcribed from a printout in Don Eyles's personal
collection, scanned by archive.org, and financially sponsored by Peter McDermott.
A team of volunteers performed the transcription and proof-reading.  The scanned
page images are available at
<a href="http://www.ibiblio.org/apollo/ScansForConversion/Sunburst37/">
the Virtual AGC Project website</a>, as well as higher-quality (but much larger)
images at <a href="https://archive.org/details/sunburst37shepat00miti">
the Virtual AGC Project's collection in the Internet Archive</a>.  Report any problems by creating
"issues" at <a href="https://github.org/virtualagc/virtualagc/issues">
the Virtual AGC Project's GitHub Repository</a>.<br><br>
Notations on the program listing read, in part:<br>
<br>
<pre>
	YUL SYSTEM FOR AGC: NEW PROGRAM SHEPATIN BY EYLES
	DEC 13, 1966

	THIS PROGRAM WAS ASSEMBLED AS A VERSION OF REVISION 37 
        OF PROGRAM SUNBURST BY LEM GROUP
</pre>
Note that the date is the date of the printout, not the date of the program revision.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
043686,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
043687,000003:                                                                                                  <span class="co">## Filename:    SINGLE_PRECISION_SUBROUTINES.agc</span>
043688,000004:                                                                                                  <span class="co">## Purpose:     A section of Sunburst revision 37, or Shepatin revision 0.</span>
043689,000005:                                                                                                  <span class="co">##              It is part of an early development version of the software</span>
043690,000006:                                                                                                  <span class="co">##              for Apollo Guidance Computer (AGC) on the unmanned Lunar</span>
043691,000007:                                                                                                  <span class="co">##              Module (LM) flight Apollo 5. Sunburst 37 was the program</span>
043692,000008:                                                                                                  <span class="co">##              upon which Don Eyles's offline development program Shepatin</span>
043693,000009:                                                                                                  <span class="co">##              was based; the listing herein transcribed was actually for</span>
043694,000010:                                                                                                  <span class="co">##              the equivalent revision 0 of Shepatin.</span>
043695,000011:                                                                                                  <span class="co">##              This file is intended to be a faithful transcription, except</span>
043696,000012:                                                                                                  <span class="co">##              that the code format has been changed to conform to the</span>
043697,000013:                                                                                                  <span class="co">##              requirements of the yaYUL assembler rather than the</span>
043698,000014:                                                                                                  <span class="co">##              original YUL assembler.</span>
043699,000015:                                                                                                  <span class="co">## Reference:   pp. 985-987</span>
043700,000016:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
043701,000017:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
043702,000018:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
043703,000019:                                                                                                  <span class="co">## Mod history: 2017-05-24 MAS  Created from Sunburst 120.</span>
043704,000020:                                                                                                  <span class="co">##              2017-06-17 NV   Updated for Sunburst 37</span>
043705,000021: 
043706,000022: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 985
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
043708,000024:    5372                                           <span class="ps">BLOCK   </span> 02                                    
043709,000025:                                                                                                  <span class="co">#  SINGLE PRECISION SINE AND COSINE</span>
043710,000026: 
<a name="5350434F53"></a>043711,000027:    5372           67740        <span class="sm">SPCOS   </span>           <span class="op">AD      </span> <a href="INTERPRETER.agc.html#48414C46">HALF</a>                                  <span class="co">#  ARGUMENTS SCALED AT PI</span>
<a name="535053494E"></a>043712,000028:    5373           55127        <span class="sm">SPSIN   </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043713,000029:    5374           15376                           <span class="op">TCF     </span> <a href="#535054">SPT</a>                                   
043714,000030:    5375           41127                           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
<a name="535054"></a>043715,000031:    5376           60000        <span class="sm">SPT     </span>           <span class="op">DOUBLE  </span>                                       
043716,000032:    5377           55127                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043717,000033:    5400           15411                           <span class="op">TCF     </span> <a href="#504F4C4C4559">POLLEY</a>                                
043718,000034:    5401           57127                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043719,000035:    5402           51127                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043720,000036:    5403           67736                           <span class="op">AD      </span> <a href="INTERPRETER.agc.html#4C494D495453">LIMITS</a>                                
043721,000037:    5404           40000                           <span class="op">COM     </span>                                       
043722,000038:    5405           61127                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043723,000039:    5406           55127                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043724,000040:    5407           15411                           <span class="op">TCF     </span> <a href="#504F4C4C4559">POLLEY</a>                                
043725,000041:    5410           15427                           <span class="op">TCF     </span> <a href="#4152473930">ARG90</a>                                 
<a name="504F4C4C4559"></a>043726,000042:    5411           00006        <span class="sm">POLLEY  </span>           <span class="op">EXTEND  </span>                                       
043727,000043:    5412           71127                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043728,000044:    5413           55130                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5351">SQ</a>                                    
043729,000045:    5414           00006                           <span class="op">EXTEND  </span>                                       
043730,000046:    5415           75434                           <span class="op">MP      </span> <a href="#43352F32">C5/2</a>                                  
043731,000047:    5416           65433                           <span class="op">AD      </span> <a href="#43332F32">C3/2</a>                                  
043732,000048:    5417           00006                           <span class="op">EXTEND  </span>                                       
043733,000049:    5420           71130                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5351">SQ</a>                                    
043734,000050:    5421           65432                           <span class="op">AD      </span> <a href="#43312F32">C1/2</a>                                  
043735,000051:    5422           00006                           <span class="op">EXTEND  </span>                                       
043736,000052:    5423           71127                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043737,000053:    5424           20001                           <span class="op">DDOUBL  </span>                                       
043738,000054:    5425           55127                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#54454D4B">TEMK</a>                                  
043739,000055:    5426           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
<a name="4152473930"></a>043740,000056:    5427           50000        <span class="sm">ARG90   </span>           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
043741,000057:    5430           47736                           <span class="op">CS      </span> <a href="INTERPRETER.agc.html#4C494D495453">LIMITS</a>                                
043742,000058:    5431           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  RESULT SCALED AT 1</span>
<a name="43312F32"></a>043743,000059:    5432           31103        <span class="sm">C1/2    </span>           <span class="ps">DEC     </span> .7853134                              
<a name="43332F32"></a>043744,000060:    5433           65552        <span class="sm">C3/2    </span>           <span class="ps">DEC     </span> -.3216146                             
<a name="43352F32"></a>043745,000061:    5434           01124        <span class="sm">C5/2    </span>           <span class="ps">DEC     </span> .0363551                              
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 986
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
043747,000063:                                                                                                  <span class="co">#  ENTER WITH ARGUMENT IN A, EXIT WITH ROOT IN A.  IF GIVEN A NEGATIVE ARGUMENT, THE RETURN SKIPS WITH CCS RESULT.</span>
043748,000064:                                                                                                  <span class="co">#  MINUS ZERO RETURNS LIKE PLUS ZERO.</span>
043749,000065:                                                                                                  <span class="co">#  MAXIMUM ERROR IN ANSWER IS NO GREATER THAN 2 BITS.</span>
043750,000066:                                                                                                  <span class="co">#  INTERRUPT PROGRAMS USING SPROOT MUST SAVE AND RESTORE SR.</span>
043751,000067: 
043752,000068: 
043753,000069: 
<a name="5350524F4F54"></a>043754,000070:    5435           55131        <span class="sm">SPROOT  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#535152415247">SQRARG</a>                                <span class="co">#  ENTER WITH C(A) = Y</span>
043755,000071:    5436           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
043756,000072:    5437           15443                           <span class="op">TCF     </span> <a href="#504F53415247">POSARG</a>                                <span class="co">#  IF PNZ, CONTINUE</span>
043757,000073:    5440           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  RETURN WITH 0 FOR +0</span>
043758,000074:    5441           24002                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
043759,000075:    5442           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  RETURN WITH 0 FOR -0</span>
043760,000076: 
<a name="504F53415247"></a>043761,000077:    5443           00006        <span class="sm">POSARG  </span>           <span class="op">EXTEND  </span>                                       
043762,000078:    5444           23130                           <span class="op">QXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524F4F54524554">ROOTRET</a>                               <span class="co">#  WILL BE CALLING SPROOT1</span>
043763,000079:    5445           65522                           <span class="op">AD      </span> <a href="#36332F36342B31">63/64+1</a>                               <span class="co">#  B(A) = Y - 1</span>
043764,000080:    5446           54000                           <span class="op">OVSK    </span>                                       
043765,000081:    5447           15511                           <span class="op">TCF     </span> <a href="#5350524F4F5432">SPROOT2</a>                               
043766,000082:    5450           57131                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#535152415247">SQRARG</a>                                <span class="co">#  ARG JUGGLING</span>
043767,000083: 
<a name="5350524F4F5433"></a>043768,000084:    5451           55131        <span class="sm">SPROOT3 </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#535152415247">SQRARG</a>                                
043769,000085:    5452           54021                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5352">SR</a>                                    <span class="co">#  C(A) = Y</span>
043770,000086:    5453           56021                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5352">SR</a>                                    <span class="co">#  (LOSE 1 BIT)</span>
043771,000087:    5454           55127                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#48414C4659">HALFY</a>                                 <span class="co">#  HALFY = Y/2</span>
043772,000088:    5455           65520                           <span class="op">AD      </span> <a href="#2D312F38">-1/8</a>                                  <span class="co">#  FORM Y/2 - 1/8</span>
043773,000089:    5456           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     <span class="co">#  TEST FOR FIRST GUESS</span>
043774,000090:    5457           65521                           <span class="op">AD      </span> <a href="#352F382B31">5/8+1</a>                                 <span class="co">#  Y .G. 1/4, X = Y/2 + 1/2</span>
043775,000091:    5460           05465                           <span class="op">TC      </span> <a href="#48494755455353">HIGUESS</a>                               <span class="co">#  +0 IMPOSSIBLE FROM ADDITION</span>
043776,000092:    5461           15462                           <span class="op">NOOP    </span>                                       <span class="co">#  Y .LE. 1/4, X/2 = Y + 1/16</span>
043777,000093:    5462           37743                           <span class="op">CAF     </span> <a href="INTERPRETER.agc.html#4249543131">BIT11</a>                                 <span class="co">#  1/16</span>
043778,000094:    5463           61131                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#535152415247">SQRARG</a>                                <span class="co">#  SQRARG = Y</span>
043779,000095:    5464           60000                           <span class="op">DOUBLE  </span>                                       <span class="co">#  X FROM X/2</span>
<a name="48494755455353"></a>043780,000096:    5465           05500        <span class="sm">HIGUESS </span>           <span class="op">TC      </span> <a href="#5350524F4F5431">SPROOT1</a>                               
043781,000097:    5466           05500                           <span class="op">TC      </span> <a href="#5350524F4F5431">SPROOT1</a>                               <span class="co">#  ITERATE TWICE</span>
043782,000098:    5467           57130                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524F4F54524554">ROOTRET</a>                               <span class="co">#  SAVE ANSWER AND GET Q</span>
043783,000099:    5470           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
043784,000100:    5471           57130                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524F4F54524554">ROOTRET</a>                               <span class="co">#  NO SHIFT NEEDED</span>
043785,000101:    5472           05476                           <span class="op">TC      </span> <a href="#524F4F5442434B">ROOTBCK</a>                               
043786,000102:    5473           57130                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524F4F54524554">ROOTRET</a>                               <span class="co">#  Q NEG, SHIFT RIGHT THREE</span>
043787,000103:    5474           00006                           <span class="op">EXTEND  </span>                                       
043788,000104:    5475           77742                           <span class="op">MP      </span> <a href="INTERPRETER.agc.html#4249543132">BIT12</a>                                 <span class="co">#  EXP -3</span>
<a name="524F4F5442434B"></a>043789,000105:    5476           51130        <span class="sm">ROOTBCK </span>           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524F4F54524554">ROOTRET</a>                               <span class="co">#  ROOTRET = Q - 1</span>
043790,000106:    5477           00001                           <span class="op">TC      </span> 1                                     <span class="co">#  RETURN, C(A) = SQRT(Y)</span>
043791,000107: 
<a name="5350524F4F5431"></a>043792,000108:    5500           56021        <span class="sm">SPROOT1 </span>           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5352">SR</a>                                    <span class="co">#  SR = X/2</span>
043793,000109:    5501           41127                           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#48414C4659">HALFY</a>                                 <span class="co">#  NEWTON ITER  X = X/2 + (Y/2 / X/2) / 2</span>
043794,000110:    5502           22007                           <span class="op">ZL      </span>                                       
043795,000111:    5503           00006                           <span class="op">EXTEND  </span>                                       
043796,000112:    5504           10021                           <span class="op">DV      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5352">SR</a>                                    <span class="co">#  C(SR) = X/2 DV DOES NOT EDIT</span>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 987
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
043798,000114:    5505           56021                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5352">SR</a>                                    
043799,000115:    5506           00006                           <span class="op">EXTEND  </span>                                       
043800,000116:    5507           60021                           <span class="op">SU      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5352">SR</a>                                    
043801,000117:    5510           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  C(A) = X (NEXT)</span>
043802,000118: 
<a name="5350524F4F5432"></a>043803,000119:    5511           41130        <span class="sm">SPROOT2 </span>           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524F4F54524554">ROOTRET</a>                               <span class="co">#  SET RETURN Q NEG, AS FLAG</span>
043804,000120:    5512           55130                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524F4F54524554">ROOTRET</a>                               
043805,000121:    5513           37747                           <span class="op">CAF     </span> <a href="INTERPRETER.agc.html#42495437">BIT7</a>                                  <span class="co">#  SHIFT FOR SIGNIFCANCE</span>
043806,000122:    5514           00006                           <span class="op">EXTEND  </span>                                       
043807,000123:    5515           71131                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#535152415247">SQRARG</a>                                
043808,000124:    5516           30001                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     <span class="co">#  B(A) = 0</span>
043809,000125:    5517           05451                           <span class="op">TC      </span> <a href="#5350524F4F5433">SPROOT3</a>                               
043810,000126: 
<a name="2D312F38"></a>043811,000127:    5520           73777        <span class="sm">-1/8    </span>           <span class="ps">OCTAL   </span> 73777                                 
<a name="352F382B31"></a>043812,000128:    5521           24001        <span class="sm">5/8+1   </span>           <span class="ps">OCTAL   </span> 24001                                 
<a name="36332F36342B31"></a>043813,000129:    5522           37401        <span class="sm">63/64+1 </span>           <span class="ps">OCTAL   </span> 37401                                 
043814,000130: 

End of include-file SINGLE_PRECISION_SUBROUTINES.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
