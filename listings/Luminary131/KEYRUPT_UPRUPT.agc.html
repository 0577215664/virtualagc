<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
055277,000001:                                                                                                 <span class="co">#  Copyright:     Public domain.</span>
055278,000002:                                                                                                 <span class="co">#  Filename:      KEYRUPT_UPRUPT.agc</span>
055279,000003:                                                                                                 <span class="co">#  Purpose:       A section of Luminary 1C, revision 131.</span>
055280,000004:                                                                                                 <span class="co">#                 It is part of the source code for the Lunar Module's (LM)</span>
055281,000005:                                                                                                 <span class="co">#                 Apollo Guidance Computer (AGC) for Apollo 13 and Apollo 14.</span>
055282,000006:                                                                                                 <span class="co">#                 This file is intended to be a faithful transcription, except</span>
055283,000007:                                                                                                 <span class="co">#                 that the code format has been changed to conform to the</span>
055284,000008:                                                                                                 <span class="co">#                 requirements of the yaYUL assembler rather than the</span>
055285,000009:                                                                                                 <span class="co">#                 original YUL assembler.</span>
055286,000010:                                                                                                 <span class="co">#  Reference:     pp. 1335-1337 of 1729.pdf.</span>
055287,000011:                                                                                                 <span class="co">#  Contact:       Ron Burkey &lt;info@sandroid.org>.</span>
055288,000012:                                                                                                 <span class="co">#  Website:       www.ibiblio.org/apollo/index.html</span>
055289,000013:                                                                                                 <span class="co">#  Mod history:   06/06/03 RSB.   Began transcribing.</span>
055290,000014:                                                                                                 <span class="co">#                 05/14/05 RSB    Corrected website reference above.</span>
055291,000015: 
055292,000016:                                                                                                 <span class="co">#  Page 1335</span>
055293,000017: 14,3775                                          <span class="ps">BANK    </span> 14                                    
055294,000018: 04,2000                                          <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#4B455952555054">KEYRUPT</a>                               
055295,000019: 04,2000                                          <span class="ps">BANK    </span>                                       
055296,000020: 04,3253                                          <span class="ps">COUNT*  </span> $$/KEYUP                              
055297,000021: 
<a name="4B45595255505431"></a>055298,000022: 04,3253           54016        <span class="sm">KEYRUPT1</span>          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
055299,000023: 04,3254           56002                          <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
055300,000024: 04,3255           54012                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
055301,000025: 04,3256           04400                          <span class="op">TC      </span> <a href="PINBALL_GAME_BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
055302,000026: 04,3257           34346                          <span class="op">CAF     </span> <a href="PINBALL_GAME_BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  
055303,000027: 04,3260           00006                          <span class="op">EXTEND  </span>                                       
055304,000028: 04,3261           02015                          <span class="op">RAND    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4E4B4559494E">MNKEYIN</a>                               <span class="co">#  CHECK IF KEYS 5M-1M ON</span>
<a name="4B4559434F4D"></a>055305,000029: 04,3262           54073        <span class="sm">KEYCOM  </span>          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
055306,000030: 04,3263           40101                          <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
055307,000031: 04,3264           74735                          <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#44534B5946424954">DSKYFBIT</a>                              
055308,000032: 04,3265           26101                          <span class="op">ADS     </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
055309,000033: 
<a name="4143434550545550"></a>055310,000034: 04,3266           34355        <span class="sm">ACCEPTUP</span>          <span class="op">CAF     </span> <a href="PINBALL_GAME_BUTTONS_AND_LIGHTS.agc.html#4348525052494F">CHRPRIO</a>                               <span class="co">#  (NOTE: RUPTREG4 = KEYTEMP1)</span>
055311,000035: 04,3267           05072                          <span class="op">TC      </span> <a href="EXECUTIVE.agc.html#4E4F564143">NOVAC</a>                                 
055312,000036: 04,3270     0776                                 <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#445350434F554E54">DSPCOUNT</a>                              
055313,000037: 04,3270           02077 60101                    <span class="ps">2CADR   </span> <a href="PINBALL_GAME_BUTTONS_AND_LIGHTS.agc.html#43484152494E">CHARIN</a>                                
055314,000038: 
055315,000039: 04,3272           30073                          <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
055316,000040: 04,3273           50064                          <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F43435452">LOCCTR</a>                                
055317,000041: 04,3274           54154                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D504143">MPAC</a>                                  <span class="co">#  LEAVE 5 BIT KEY CODE IN MPAC FOR CHARIN</span>
055318,000042: 04,3275           05270                          <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
055319,000043: 
055320,000044:                                                                                                 <span class="co">#  Page 1336</span>
055321,000045:                                                                                                 <span class="co">#  UPRUPT PROGRAM</span>
055322,000046: 
<a name="555052555054"></a>055323,000047: 04,3276           54016        <span class="sm">UPRUPT  </span>          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
055324,000048: 04,3277           56002                          <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
055325,000049: 04,3300           54012                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
055326,000050: 04,3301           04400                          <span class="op">TC      </span> <a href="PINBALL_GAME_BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
055327,000051: 04,3302           34755                          <span class="op">CAF     </span> <a href="FIXED_FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
055328,000052: 04,3303           56045                          <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#494E4C494E4B">INLINK</a>                                
055329,000053: 04,3304           54073                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
055330,000054: 04,3305           34751                          <span class="op">CAF     </span> <a href="FIXED_FIXED_CONSTANT_POOL.agc.html#42495433">BIT3</a>                                  <span class="co">#  TURN ON UPACT LIGHT</span>
055331,000055: 04,3306           00006                          <span class="op">EXTEND  </span>                                       <span class="co">#  (BIT 3 OF CHANNEL 11)</span>
055332,000056: 04,3307           05011                          <span class="op">WOR     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4453414C4D4F5554">DSALMOUT</a>                              
<a name="555052505431"></a>055333,000057: 04,3310           34346        <span class="sm">UPRPT1  </span>          <span class="op">CAF     </span> <a href="PINBALL_GAME_BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  TEST FOR TRIPLE CHAR REDUNDANCY</span>
055334,000058: 04,3311           70073                          <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 OF WORD</span>
055335,000059: 04,3312           56073                          <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 INTO KEYTEMP1</span>
055336,000060: 04,3313           00006                          <span class="op">EXTEND  </span>                                       
055337,000061: 04,3314           74742                          <span class="op">MP      </span> <a href="FIXED_FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 <span class="co">#  SHIFT RIGHT 5</span>
055338,000062: 04,3315           54332                          <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              
055339,000063: 04,3316           74346                          <span class="op">MASK    </span> <a href="PINBALL_GAME_BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  MID 5</span>
055340,000064: 04,3317           63353                          <span class="op">AD      </span> <a href="#48493130">HI10</a>                                  
055341,000065: 04,3320           03350                          <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
055342,000066: 04,3321           34742                          <span class="op">CAF     </span> <a href="FIXED_FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 
055343,000067: 04,3322           00006                          <span class="op">EXTEND  </span>                                       
055344,000068: 04,3323           70332                          <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              <span class="co">#  SHIFT RIGHT 5</span>
055345,000069: 04,3324           74346                          <span class="op">MASK    </span> <a href="PINBALL_GAME_BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  HIGH 5</span>
055346,000070: 04,3325           40000                          <span class="op">COM     </span>                                       
055347,000071: 04,3326           03350                          <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
055348,000072: 
<a name="5550434B"></a>055349,000073: 04,3327           43356        <span class="sm">UPCK    </span>          <span class="op">CS      </span> <a href="#454C52434F4445">ELRCODE</a>                               <span class="co">#  CODE IS GOOD.  IF CODE = `ERROR RESET',</span>
055350,000074: 04,3330           60073                          <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  CLEAR UPLOCKFL (SET BIT4 OF FLAGWRD7 = 0)</span>
055351,000075: 04,3331           00006                          <span class="op">EXTEND  </span>                                       <span class="co">#  IF CODE DOES NOT = `ERROR RESET', ACCEPT</span>
055352,000076: 04,3332           13340                          <span class="op">BZF     </span> <a href="#434C55504C4F434B">CLUPLOCK</a>                              <span class="co">#  CODE ONLY IF UPLOCKFL IS CLEAR (=0).</span>
055353,000077: 
055354,000078: 04,3333           34750                          <span class="op">CAF     </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  TEST UPLOCKFL FOR 0 OR 1</span>
055355,000079: 04,3334           70103                          <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
055356,000080: 04,3335           10000                          <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
055357,000081: 04,3336           05270                          <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                <span class="co">#  UPLOCKFL = 1</span>
055358,000082: 04,3337           03266                          <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              <span class="co">#  UPLOCKFL = 0</span>
055359,000083: 
<a name="434C55504C4F434B"></a>055360,000084: 04,3340           44750        <span class="sm">CLUPLOCK</span>          <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  CLEAR UPLOCKFL (I.E., SET BIT 4 OF</span>
055361,000085: 04,3341           70103                          <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  FLAGWRD7 = 0)</span>
055362,000086: 04,3342           54103                          <span class="op">TS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
055363,000087: 04,3343           03266                          <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              
055364,000088: 
055365,000089:                                                                                                 <span class="co">#  CODE IS BAD</span>
<a name="544D4641494C32"></a>055366,000090: 04,3344           40103        <span class="sm">TMFAIL2 </span>          <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  LOCK OUT FURTHER UPLINK ACTIVITY</span>
055367,000091: 04,3345           74750                          <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  (BY SETTING UPLOCKFL = 1) UNTIL</span>
055368,000092: 04,3346           26103                          <span class="op">ADS     </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  `ERROR RESET' IS SENT VIA UPLINK.</span>
055369,000093: 04,3347           05270                          <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
<a name="555054455354"></a>055370,000094: 04,3350           60073        <span class="sm">UPTEST  </span>          <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
055371,000095:                                                                                                 <span class="co">#  Page 1337</span>
055372,000096: 04,3351           10000                          <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
055373,000097: 04,3352           03344                          <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
<a name="48493130"></a>055374,000098: 04,3353           77740        <span class="sm">HI10    </span>          <span class="ps">OCT     </span> 77740                                 
055375,000099: 04,3354           03344                          <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
055376,000100: 04,3355           00002                          <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
055377,000101: 
<a name="454C52434F4445"></a>055378,000102: 04,3356           00022        <span class="sm">ELRCODE </span>          <span class="ps">OCT     </span> 22                                    
055379,000103: 
055380,000104:                                                                                                 <span class="co">#  `UPLINK ACTIVITY LIGHT' IS TURNED OFF BY .....</span>
055381,000105:                                                                                                 <span class="co">#         1.      VBRELDSP</span>
055382,000106:                                                                                                 <span class="co">#         2.      ERROR RESET</span>
055383,000107:                                                                                                 <span class="co">#         3.      UPDATE PROGRAM (P27) ENTERED BY V70,V71,V72, AND V73.</span>
055384,000108: 
055385,000109:                                                                                                 <span class="co">#  THE RECEPTION OF A BAD CODE (I.E., CCC FAILURE) LOCKS OUT FURTHER UPLINK ACTIVITY BY SETTING BIT4 OF FLAGWRD7 = 1.</span>
055386,000110:                                                                                                 <span class="co">#  THIS INDICATION WILL BE TRANSFERRED TO THE GROUND BY THE DOWNLINK WHICH DOWNLINKS ALL FLAGWORDS.</span>
055387,000111:                                                                                                 <span class="co">#  WHEN UPLINK ACTIVITY IS LOCKED OUT, IT CAN BE ALLOWED WHEN THE GROUND UPLINS AND `ERROR RESET' CODE.</span>
055388,000112:                                                                                                 <span class="co">#  (IT IS RECOMMENDED THAT THE `ERROR LIGHT RESET' CODE IS PRECEEDED BY 16 BITS THE FIRST OF WHICH IS 1 FOLLOWED</span>
055389,000113:                                                                                                 <span class="co">#  BY 15 ZEROS.  THIS WILL ELIMINATE EXTRANEOUS BITS FROM INLINK WHICH MAY HAVE BEEN LEFT OVER FROM THE ORIGINAL</span>
055390,000114:                                                                                                 <span class="co">#  FAILURE).</span>
055391,000115: 
055392,000116:                                                                                                 <span class="co">#  UPLINK ACTIVITY IS ALSO ALLOWED (UNLOCKED) DURING FRECH START WHEN FRESH START SETS BIT4 OF FLAGWRD7 = 0.</span>

End of include-file KEYRUPT_UPRUPT.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
