<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
041335,000001:                                                                                                 <span class="co">#  Copyright:     Public domain.</span>
041336,000002:                                                                                                 <span class="co">#  Filename:      LUNAR_AND_SOLAR_EPHEMERIDES_SUBROUTINES.agc</span>
041337,000003:                                                                                                 <span class="co">#  Purpose:       A section of Luminary 1C, revision 131.</span>
041338,000004:                                                                                                 <span class="co">#                 It is part of the source code for the Lunar Module's (LM)</span>
041339,000005:                                                                                                 <span class="co">#                 Apollo Guidance Computer (AGC) for Apollo 13 and Apollo 14.</span>
041340,000006:                                                                                                 <span class="co">#                 This file is intended to be a faithful transcription, except</span>
041341,000007:                                                                                                 <span class="co">#                 that the code format has been changed to conform to the</span>
041342,000008:                                                                                                 <span class="co">#                 requirements of the yaYUL assembler rather than the</span>
041343,000009:                                                                                                 <span class="co">#                 original YUL assembler.</span>
041344,000010:                                                                                                 <span class="co">#  Reference:     pp. 983-986 of 1729.pdf.</span>
041345,000011:                                                                                                 <span class="co">#  Contact:       Ron Burkey &lt;info@sandroid.org>.</span>
041346,000012:                                                                                                 <span class="co">#  Website:       www.ibiblio.org/apollo/index.html</span>
041347,000013:                                                                                                 <span class="co">#  Mod history:   05/29/03 RSB.   Began transcribing.</span>
041348,000014:                                                                                                 <span class="co">#                 05/14/05 RSB    Corrected website reference above.</span>
041349,000015: 
041350,000016:                                                                                                 <span class="co">#  Page 983</span>
041351,000017:                                                                                                 <span class="co">#  NAME -- LSPOS -- LOCATE SUN AND MOON                   DATE -- 25 OCT 67</span>
041352,000018:                                                                                                 <span class="co">#  MOD NO. 1</span>
041353,000019:                                                                                                 <span class="co">#  MOD BY NEVILLE                                 ASSEMBLY SUNDANCE</span>
041354,000020: 
041355,000021:                                                                                                 <span class="co">#  FUNCTIONAL DESCRIPTION</span>
041356,000022: 
041357,000023:                                                                                                 <span class="co">#  COMPUTES UNIT POSITION VECTOR OF THE SUN AND MOON IN THE BASIC REFERENCE SYSTEM.  THE SUN VECTOR S IS</span>
041358,000024:                                                                                                 <span class="co">#  LOCATED VIA TWO ANLES.  THE FIRST ANGLE (OBLIQUITY) IS THE ANGLE BETWEEN THE EARTH EQUATOR AND THE ECLIPTIC.  THE</span>
041359,000025:                                                                                                 <span class="co">#  POSITION VECTOR OF THE SUN IS</span>
041360,000026:                                                                                                 <span class="co">#         _</span>
041361,000027:                                                                                                 <span class="co">#         S = (COS(LOS), COS(OBL)*SIN(LOS), SIN(OBL)*SIN(LOS)), WHERE</span>
041362,000028: 
041363,000029:                                                                                                 <span class="co">#         LOS = LOS +LOS *T-(C *SIN(2PI*T)/365.24 +C *COS(2PI*T)/365.24)</span>
041364,000030:                                                                                                 <span class="co">#                  0    R     0                     1</span>
041365,000031:                                                                                                 <span class="co">#         LOS  (RAD) IS THE LONGITUDE OF THE SUN FOR MIGNIGHT JUNE 30TH OF THE PARTICULAR YEAR.</span>
041366,000032:                                                                                                 <span class="co">#           0</span>
041367,000033:                                                                                                 <span class="co">#         LOS  (RAD/DAY) IS THE MEAN RATE FOR THE PARTICULAR YEAR.</span>
041368,000034:                                                                                                 <span class="co">#            R</span>
041369,000035: 
041370,000036:                                                                                                 <span class="co">#  LOS  AND LOS  ARE STORED AS LOSC AND LOSR IN RATESP.</span>
041371,000037:                                                                                                 <span class="co">#     0        R</span>
041372,000038:                                                                                                 <span class="co">#  COS(OBL) AND SIN(OBL) ARE STORED IN THE MATRIX KONMAT.</span>
041373,000039: 
041374,000040:                                                                                                 <span class="co">#  T, TIME MEASURED IN DAYS (24 HOURS) IS STORED IN TIMEP.</span>
041375,000041: 
041376,000042:                                                                                                 <span class="co">#  C  AND C  ARE FUDGE FACTORS TO MINIMIZE THE DEVIATION.  THEY ARE STORED AS ONE CONSTANT (CMOD), SINCE</span>
041377,000043:                                                                                                 <span class="co">#   0      1                               2  2 1/2</span>
041378,000044:                                                                                                 <span class="co">#  C *SIN(X)+C *COS(X) CAN BE WRITTEN AS (C +C )   *SIN(X+PHI), WHERE PHI=ARCTAN(C /C ).</span>
041379,000045:                                                                                                 <span class="co">#                                          0  1                                   1  0</span>
041380,000046: 
041381,000047:                                                                                                 <span class="co">#  THE MOON IS LOCATED VIA FOUR ANGLES, THE FIRST IS THE OBLIQUITY. THE SECOND IS THE MEAN LONGITUDE OF THE MOON,</span>
041382,000048:                                                                                                 <span class="co">#  MEASURED IN THE ECLIPTIC FROM THE MEAN EQUINOX TO THE MEAN ASCENDING NODE OF THE LUNAR ORBIT, AND THEN ALONG THE</span>
041383,000049:                                                                                                 <span class="co">#  ORBIT.  THE THIRD ANGLE IS THE ANGLE BETWEEN THE ECLIPTIC AND THE LUNAR ORBIT.  THE FOURTH ANGLE IS THE LONGITUDE</span>
041384,000050:                                                                                                 <span class="co">#  OF THE NODE OF THE MOON, MEASURED IN THE LUNAR ORBIT.  LET THESE ANGLES BE OBL,LOM,IM, AND LON RESPECTIVELY.</span>
041385,000051: 
041386,000052:                                                                                                 <span class="co">#  THE SIMPLIFIED POSITION VECTOR OF THE MOON IS</span>
041387,000053:                                                                                                 <span class="co">#         _</span>
041388,000054:                                                                                                 <span class="co">#         M=(COS(LOM), COS(OBL)*SIN(LOM)-SIN(OBL)*SIN(IM)*SIN(LOM-LON), SIN(OBL)*SIN(LOM)+COS(OBL)*SIN(IM)*SIN(LOM-LON))</span>
041389,000055: 
041390,000056:                                                                                                 <span class="co">#  WHERE</span>
041391,000057:                                                                                                 <span class="co">#         LOM=LOM +LOM *T-(A *SIN(2PI*T/27.5545)+A *COS(2PI*T/27.5545)+B *SIN(2PI*T/32)+B *COS(2PI*T/32)), AND</span>
041392,000058:                                                                                                 <span class="co">#                0    R     0                     1                     0                     1</span>
041393,000059:                                                                                                 <span class="co">#         LON=LON +LON</span>
041394,000060:                                                                                                 <span class="co">#                0    R</span>
041395,000061:                                                                                                 <span class="co">#  A , A , B  AND B  ARE STORE AS AMOD AND BMOD (SEE DESCRIPTION OF CMOD, ABOVE).  COS(OBL), SIN(OBL)*SIN(IM),</span>
041396,000062:                                                                                                 <span class="co">#   0   1   0      1</span>
041397,000063:                                                                                                 <span class="co">#  SIN(OBL), AND COS(OBL)*SIN(IM) ARE STORED IN KONMAT AS K1, K2, K3, AND K4, RESPECTIVELY.  LOM , LOM , LON , LON</span>
041398,000064:                                                                                                 <span class="co">#                                                                                               0     R     0     R</span>
041399,000065:                                                                                                 <span class="co">#  ARE STORED AS LOM0, LOMR, LON0, AND LONR IN RATESP.</span>
041400,000066: 
041401,000067:                                                                                                 <span class="co">#  THE THREE PHIS ARE STORED AS AARG, BARG, AND CARG(SUN).  ALL CONSTANTS ARE UPDATED BY YEAR.</span>
041402,000068: 
041403,000069:                                                                                                 <span class="co">#  CALLING SEQUENCE</span>
041404,000070:                                                                                                 <span class="co">#  Page 984</span>
041405,000071:                                                                                                 <span class="co">#         CALL LSPOS.  RETURN IS VIA CPRET.</span>
041406,000072: 
041407,000073:                                                                                                 <span class="co">#  ALARMS OR ABORTS</span>
041408,000074:                                                                                                 <span class="co">#         NONE</span>
041409,000075: 
041410,000076:                                                                                                 <span class="co">#  ERASABLE INITIALIZATION REQUIRED</span>
041411,000077:                                                                                                 <span class="co">#         TEPHEM -- TIME FROM MIGNIGHT 1 JULY PRECEDING THE LAUNCH TO THE TIME OF THE LAUNCH (WHEN THE AGC CLOCK WENT</span>
041412,000078:                                                                                                 <span class="co">#         TO ZERO).  TEPHEM IS TP WITH UNITS OF CENTI-SECONDS.</span>
041413,000079: 
041414,000080:                                                                                                 <span class="co">#         TIME2 AND TIME1 ARE IN MPAC AND MPAC +1 WHEN PROGRAM IS CALLED.</span>
041415,000081: 
041416,000082:                                                                                                 <span class="co">#  OUTPUT</span>
041417,000083:                                                                                                 <span class="co">#         UNIT POSITIONAL VECTOR OF SUN IN VSUN.  (SCALED B-1)</span>
041418,000084:                                                                                                 <span class="co">#         UNIT POSITIONAL VECTOR OF MOON IN VMOON.  (SCALED B-1)</span>
041419,000085: 
041420,000086:                                                                                                 <span class="co">#  SUBROUTINES USED</span>
041421,000087:                                                                                                 <span class="co">#         NONE</span>
041422,000088: 
041423,000089:                                                                                                 <span class="co">#  DEBRIS</span>
041424,000090:                                                                                                 <span class="co">#         CURRENT CORE SET, WORK AREA AND FREEFLAG</span>
041425,000091: 
041426,000092: 04,2773                                          <span class="ps">BANK    </span> 04                                    
041427,000093: 15,2000                                          <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#455048454D">EPHEM</a>                                 
041428,000094: 15,2000                                          <span class="ps">BANK    </span>                                       
041429,000095: 
041430,000096: 15,3647  E5,1714                                 <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5653554E">VSUN</a>                                  
041431,000097: 15,3647                                          <span class="ps">COUNT*  </span> $$/<a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#455048454D">EPHEM</a>                              
<a name="4C554E504F53"></a>041432,000098: 15,3647  15,3647               <span class="sm">LUNPOS  </span>          <span class="ps">EQUALS  </span> <a href="#4C53504F53">LSPOS</a>                                 
041433,000099: 
<a name="4C53504F53"></a>041434,000100: 15,3647           54201        <span class="sm">LSPOS   </span>          <span class="in">SETPD   </span> <span class="in">SR        </span>                            
041435,000101: 15,3650           00001                                   0                                     
041436,000102: 15,3651           20617                                   14D                                   <span class="co">#  TP</span>
041437,000103: 15,3652           56371                          <span class="in">TAD     </span> <span class="in">DDV       </span>                            
041438,000104: 15,3653           01707                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#54455048454D">TEPHEM</a>                                <span class="co">#  TIME OF LAUNCH</span>
041439,000105: 15,3654           12024                                   <a href="CONTROLLED_CONSTANTS.agc.html#4353544F444159">CSTODAY</a>                               <span class="co">#  24 HOURS -- 8640000 CENTI-SECS/DAY B-33</span>
041440,000106: 15,3655           00031                          <span class="in">STORE   </span> <a href="#54494D4550">TIMEP</a>                                 <span class="co">#  T IN DAYS</span>
041441,000107: 15,3656           77170                          <span class="in">AXT,1   </span> <span class="in">AXT,2     </span>                            
041442,000108: 15,3657           00000                                   0                                     
041443,000109: 15,3660           00000                                   0                                     
041444,000110: 15,3661           77614                          <span class="in">CLEAR   </span>                                       
041445,000111: 15,3662           00274                                   <a href="FLAGWORD_ASSIGNMENTS.agc.html#46524545464C4147">FREEFLAG</a>                              <span class="co">#  SWITCH BIT</span>
<a name="504F53495441"></a>041446,000112: 15,3663           77745        <span class="sm">POSITA  </span>          <span class="in">DLOAD   </span>                                       
041447,000113: 15,3664           12004                                   <a href="CONTROLLED_CONSTANTS.agc.html#4B4F4E4D4154">KONMAT</a>     +2                         <span class="co">#  ZEROS</span>
041448,000114: 15,3665           00027                          <span class="in">STORE   </span> <a href="#47544D50">GTMP</a>                                  
<a name="504F53495442"></a>041449,000115: 15,3666           40745        <span class="sm">POSITB  </span>          <span class="in">DLOAD   </span> <span class="in">DMP*      </span>                            
041450,000116: 15,3667           00031                                   <a href="#54494D4550">TIMEP</a>                                 <span class="co">#  T</span>
041451,000117: 15,3670           12050                                   <a href="CONTROLLED_CONSTANTS.agc.html#56414C3637">VAL67</a>      +4,1                       <span class="co">#  1/27 OR 1/32 OR 1/365</span>
041452,000118:                                                                                                 <span class="co">#  Page 985</span>
041453,000119: 15,3671           42661                          <span class="in">SL      </span> <span class="in">DAD*      </span>                            
041454,000120: 15,3672           20211                                   8D                                    
041455,000121: 15,3673           12046                                   <a href="CONTROLLED_CONSTANTS.agc.html#56414C3637">VAL67</a>      +2,1                       <span class="co">#  AARG</span>
041456,000122: 15,3674           40756                          <span class="in">SIN     </span> <span class="in">DMP*      </span>                            <span class="co">#  SIN(T/27+PHI) OR T/32 OR T/365</span>
041457,000123: 15,3675           12044                                   VAL67,1                               <span class="co">#  (A0**2+A1**2)**1/2 SIN(X+PHIA)</span>
041458,000124: 15,3676           62015                          <span class="in">DAD     </span> <span class="in">INCR,1    </span>                            <span class="co">#  PLUS</span>
041459,000125: 15,3677           00027                                   <a href="#47544D50">GTMP</a>                                  <span class="co">#  (B0**2+B1**2)**1/2 SIN(X+PHIB)</span>
041460,000126: 15,3700           77771                          <span class="ps">DEC     </span> -6         B-14                       
041461,000127: 15,3701           00027                          <span class="in">STORE   </span> <a href="#47544D50">GTMP</a>                                  <span class="co">#  OR (C0**2+C1**2)**1/2 SIN(X+PHIC)</span>
041462,000128: 15,3702           77614                          <span class="in">BOFSET  </span>                                       
041463,000129: 15,3703           00054                                   <a href="FLAGWORD_ASSIGNMENTS.agc.html#46524545464C4147">FREEFLAG</a>                              
041464,000130: 15,3704           33666                                   <a href="#504F53495442">POSITB</a>                                
<a name="504F53495444"></a>041465,000131: 15,3705           40745        <span class="sm">POSITD  </span>          <span class="in">DLOAD   </span> <span class="in">DMP*      </span>                            
041466,000132: 15,3706           00031                                   <a href="#54494D4550">TIMEP</a>                                 <span class="co">#  T</span>
041467,000133: 15,3707           65747                                   RATESP,2                              <span class="co">#  LOMR,LOSR,LONR</span>
041468,000134: 15,3710           42661                          <span class="in">SL      </span> <span class="in">DAD*      </span>                            
041469,000135: 15,3711           20206                                   5D                                    
041470,000136: 15,3712           65741                                   <a href="CONTROLLED_CONSTANTS.agc.html#524154455350">RATESP</a>     +6,2                       <span class="co">#  LOM0,LOS0,LON0</span>
041471,000137: 15,3713           77625                          <span class="in">DSU     </span>                                       
041472,000138: 15,3714           00027                                   <a href="#47544D50">GTMP</a>                                  
041473,000139: 15,3715           10021                          <span class="in">STORE   </span> STMP,2                                <span class="co">#  LOM,LOS,LON</span>
041474,000140: 15,3716           63135                          <span class="in">SLOAD   </span> <span class="in">INCR,2    </span>                            
041475,000141: 15,3717           00050                                   <a href="ERASABLE_ASSIGNMENTS.agc.html#5832">X2</a>                                    
041476,000142: 15,3720           77775                          <span class="ps">DEC     </span> -2         B-14                       
041477,000143: 15,3721           53015                          <span class="in">DAD     </span> <span class="in">BZE       </span>                            
041478,000144: 15,3722           12026                                   <a href="CONTROLLED_CONSTANTS.agc.html#5243422D3133">RCB-13</a>                                <span class="co">#  PLUS 2</span>
041479,000145: 15,3723           33753                                   <a href="#504F53495445">POSITE</a>                                <span class="co">#  2ND</span>
041480,000146: 15,3724           77644                          <span class="in">BPL     </span>                                       
041481,000147: 15,3725           33663                                   <a href="#504F53495441">POSITA</a>                                <span class="co">#  1ST</span>
<a name="504F53495446"></a>041482,000148: 15,3726           45345        <span class="sm">POSITF  </span>          <span class="in">DLOAD   </span> <span class="in">DSU       </span>                            <span class="co">#  3RD</span>
041483,000149: 15,3727           00021                                   <a href="#53544D50">STMP</a>                                  <span class="co">#  LOM</span>
041484,000150: 15,3730           00025                                   <a href="#53544D50">STMP</a>       +4                         <span class="co">#  LON</span>
041485,000151: 15,3731           65356                          <span class="in">SIN     </span> <span class="in">PDDL      </span>                            <span class="co">#  SIN(LOM-LON)</span>
041486,000152: 15,3732           00021                                   <a href="#53544D50">STMP</a>                                  
041487,000153: 15,3733           65356                          <span class="in">SIN     </span> <span class="in">PDDL      </span>                            <span class="co">#  SIN LOM</span>
041488,000154: 15,3734           00021                                   <a href="#53544D50">STMP</a>                                  
041489,000155: 15,3735           55546                          <span class="in">COS     </span> <span class="in">VDEF      </span>                            <span class="co">#  COS LOM</span>
041490,000156: 15,3736           53521                          <span class="in">MXV     </span> <span class="in">UNIT      </span>                            
041491,000157: 15,3737           12002                                   <a href="CONTROLLED_CONSTANTS.agc.html#4B4F4E4D4154">KONMAT</a>                                <span class="co">#  K1,K2,K3,K4</span>
041492,000158: 15,3740           02723                          <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#564D4F4F4E">VMOON</a>                                 
041493,000159: 15,3741           65345                          <span class="in">DLOAD   </span> <span class="in">PDDL      </span>                            
041494,000160: 15,3742           12004                                   <a href="CONTROLLED_CONSTANTS.agc.html#4B4F4E4D4154">KONMAT</a>     +2                         <span class="co">#  ZERO</span>
041495,000161: 15,3743           00023                                   <a href="#53544D50">STMP</a>       +2                         
041496,000162: 15,3744           65356                          <span class="in">SIN     </span> <span class="in">PDDL      </span>                            <span class="co">#  SIN LOS</span>
041497,000163: 15,3745           00023                                   <a href="#53544D50">STMP</a>       +2                         
041498,000164: 15,3746           55546                          <span class="in">COS     </span> <span class="in">VDEF      </span>                            <span class="co">#  COS LOS</span>
041499,000165: 15,3747           53521                          <span class="in">MXV     </span> <span class="in">UNIT      </span>                            
041500,000166: 15,3750           12002                                   <a href="CONTROLLED_CONSTANTS.agc.html#4B4F4E4D4154">KONMAT</a>                                
041501,000167: 15,3751           02715                          <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5653554E">VSUN</a>                                  
041502,000168: 15,3752           77616                          <span class="in">RVQ     </span>                                       
041503,000169:                                                                                                 <span class="co">#  Page 986</span>
<a name="504F53495445"></a>041504,000170: 15,3753           77745        <span class="sm">POSITE  </span>          <span class="in">DLOAD   </span>                                       
041505,000171: 15,3754           12004                                   <a href="CONTROLLED_CONSTANTS.agc.html#4B4F4E4D4154">KONMAT</a>     +2                         <span class="co">#  ZEROS</span>
041506,000172: 15,3755           00027                          <span class="in">STORE   </span> <a href="#47544D50">GTMP</a>                                  
041507,000173: 15,3756           77650                          <span class="in">GOTO    </span>                                       
041508,000174: 15,3757           33705                                   <a href="#504F53495444">POSITD</a>                                
041509,000175: 05,2000                                          <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#455048454D31">EPHEM1</a>                                
041510,000176: 05,2000                                          <span class="ps">BANK    </span>                                       
041511,000177: 
041512,000178: 05,3505                                          <span class="ps">COUNT*  </span> $$/<a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#455048454D">EPHEM</a>                              
<a name="53544D50"></a>041513,000179: 05,3505                        <span class="sm">STMP    </span>          <span class="ps">EQUALS  </span> 16D                                   
<a name="47544D50"></a>041514,000180: 05,3505                        <span class="sm">GTMP    </span>          <span class="ps">EQUALS  </span> 22D                                   
<a name="54494D4550"></a>041515,000181: 05,3505                        <span class="sm">TIMEP   </span>          <span class="ps">EQUALS  </span> 24D                                   
041516,000182: 
041517,000183:                                                                                                 <span class="co">#  *** END OF LEMP50S .119 ***</span>

End of include-file LUNAR_AND_SOLAR_EPHEMERIDES_SUBROUTINES.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
