<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files were derived originally from the scan from MIT's Dibner Institute's 
now-discontinued website titled "History of Recent Science and Technology".  It is believed
that the original listing was preserved by AGC developer Don Eyles, copied/reduced by
AGC developer Hugh Blair-Smith, passed by AGC developer James Kernan to collector David Craig,
scanned by Gary Neff, and then passed to the Dibner Institute 
where unfortunately the high-quality scans were reduced in legibility as part of the 
online-presentation process, and the original scans discarded.  
The source code was transcribed from
those images by Ron Burkey.  The images from the Dibner Institute website, and unfortunately not
the discarded original high-quality scans, though with a few high-quality replacement scans
provided directly by Gary Neff, are now available 
<a href="http://www.ibiblio.org/apollo/ScansForConversion/Luminary131/">
at the Virtual AGC project website</a>.  
Report any conversion errors to info@sandroid.org. 
Notations on the program listing read, in part:<br>
<br>
<pre>
	GAP:  ASSEMBLE REVISION 131 OF AGC PROGRAM LUMINARY BY NASA 2021112-091
	17:53 DEC. 19, 1969
</pre>
Note that the date is the date of the printout, not the date of the program revision.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
026077,000002:                                                                                                  <span class="co">#  Copyright:    Public domain.</span>
026078,000003:                                                                                                  <span class="co">#  Filename:     P30_P37.agc</span>
026079,000004:                                                                                                  <span class="co">#  Purpose:      A section of Luminary 1C, revision 131.</span>
026080,000005:                                                                                                  <span class="co">#                It is part of the source code for the Lunar Module's (LM)</span>
026081,000006:                                                                                                  <span class="co">#                Apollo Guidance Computer (AGC) for Apollo 13 and Apollo 14.</span>
026082,000007:                                                                                                  <span class="co">#                This file is intended to be a faithful transcription, except</span>
026083,000008:                                                                                                  <span class="co">#                that the code format has been changed to conform to the</span>
026084,000009:                                                                                                  <span class="co">#                requirements of the yaYUL assembler rather than the </span>
026085,000010:                                                                                                  <span class="co">#                original YUL assembler.</span>
026086,000011:                                                                                                  <span class="co">#  Reference:    pp. 624-627 of 1729.pdf.</span>
026087,000012:                                                                                                  <span class="co">#  Contact:      Ron Burkey &lt;info@sandroid.org>.</span>
026088,000013:                                                                                                  <span class="co">#  Website:      www.ibiblio.org/apollo</span>
026089,000014:                                                                                                  <span class="co">#  Mod history:  05/19/03 RSB.   Began transcribing.</span>
026090,000015: 
026091,000016:                                                                                                  <span class="co">#  Page 624</span>
026092,000017:                                                                                                  <span class="co">#  PROGRAM DESCRIPTION P30       DATE 3-6-67</span>
026093,000018:                                                                                                  <span class="co">#  MOD.1 BY RAMA AIYAWAR</span>
026094,000019: 
026095,000020:                                                                                                  <span class="co">#  FUNCTIONAL DESCRIPTIONS</span>
026096,000021:                                                                                                  <span class="co">#        ACCEPT ASTRONAUT INPUTS OF TIG,DELV(LV)</span>
026097,000022:                                                                                                  <span class="co">#        CALL IMU STATUS CHECK ROUTINE (R02)</span>
026098,000023:                                                                                                  <span class="co">#        DISPLAY TIME TO GO, APOGEE, PERIGEE, DELV(MAG), MGA AT IGN</span>
026099,000024:                                                                                                  <span class="co">#        REQUEST BURN PROGRAM</span>
026100,000025: 
026101,000026:                                                                                                  <span class="co">#  CALLING SEQUENCE VIA JOB FROM V37</span>
026102,000027: 
026103,000028:                                                                                                  <span class="co">#  EXIT VIA V37 CALL CR TO GOTOP00H (V34E)</span>
026104,000029: 
026105,000030:                                                                                                  <span class="co">#  SUBROUTINE CALLS --   FLAGUP, PHASCHNG, BANKCALL, ENDOFJOB, GOFLASH, GOFLASHR</span>
026106,000031:                                                                                                  <span class="co">#                        GOPERF3R, INTPRET, BLANKET, GOTOP00H, R02BOTH, S30.1,</span>
026107,000032:                                                                                                  <span class="co">#                        TIG/N35, MIDGIM, DISPMGA</span>
026108,000033: 
026109,000034:                                                                                                  <span class="co">#  ERASABLE INITIALIZATION -- STATE VECTOR</span>
026110,000035: 
026111,000036:                                                                                                  <span class="co">#  OUTPUT --     RINIT, VINIT, +MGA, VTIG, RTIG, DELVSIN, DELVSAB, DELVSLV, HAPO,</span>
026112,000037:                                                                                                  <span class="co">#                HPER, TTOGO</span>
026113,000038: 
026114,000039:                                                                                                  <span class="co">#  DEBRIS -- A, L, MPAC, PUSHLIST</span>
026115,000040: 
026116,000041: 32,3000                                           <span class="ps">BANK    </span> 32                                    
026117,000042: 35,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#50333053">P30S</a>                                  
026118,000043: 35,2000                                           <span class="ps">BANK    </span>                                       
026119,000044: 35,2000  E4,1652                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#2B4D4741">+MGA</a>                                  
026120,000045: 35,2000                                           <span class="ps">COUNT*  </span> $$/<a href="#503330">P30</a>                                
<a name="503330"></a>026121,000046: 35,2000           05504        <span class="sm">P30     </span>           <span class="op">TC      </span> <a href="SERVICE_ROUTINES.agc.html#5550464C4147">UPFLAG</a>                                <span class="co">#  SET UPDATE FLAG</span>
026122,000047: 35,2001           00027                           <span class="ps">ADRES   </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#5550444154464C47">UPDATFLG</a>                              
026123,000048: 35,2002           05504                           <span class="op">TC      </span> <a href="SERVICE_ROUTINES.agc.html#5550464C4147">UPFLAG</a>                                <span class="co">#  SET TRACK FLAG</span>
026124,000049: 35,2003           00031                           <span class="ps">ADRES   </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#545241434B464C47">TRACKFLG</a>                              
026125,000050: 
<a name="5033304E3333"></a>026126,000051: 35,2004           32032        <span class="sm">P30N33  </span>           <span class="op">CAF     </span> <a href="#5630364E3333">V06N33</a>                                <span class="co">#  T OF IGN</span>
026127,000052: 35,2005           03621                           <span class="op">TC      </span> <a href="P34-35_P74-75.agc.html#564E50303048">VNP00H</a>                                <span class="co">#  RETURN ON PROCEED, P00H ON TERMINATE</span>
026128,000053: 
026129,000054: 35,2006           33636                           <span class="op">CAF     </span> <a href="P34-35_P74-75.agc.html#5630364E3831">V06N81</a>                                <span class="co">#  DISPLAY DELTA V (LV)</span>
026130,000055: 35,2007           03621                           <span class="op">TC      </span> <a href="P34-35_P74-75.agc.html#564E50303048">VNP00H</a>                                <span class="co">#        REDISPLAY ON RECYCLE</span>
026131,000056: 
026132,000057: 35,2010           05516                           <span class="op">TC      </span> <a href="SERVICE_ROUTINES.agc.html#444F574E464C4147">DOWNFLAG</a>                              <span class="co">#  RESET UPDATE FLAG</span>
026133,000058: 35,2011           00027                           <span class="ps">ADRES   </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#5550444154464C47">UPDATFLG</a>                              
026134,000059: 35,2012           06042                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
026135,000060: 35,2013           77624                           <span class="in">CALL    </span>                                       
026136,000061: 35,2014           70000                                    <a href="#5333302E31">S30.1</a>                                 
026137,000062: 35,2015           43014                           <span class="in">SET     </span> <span class="in">SET       </span>                            
026138,000063: 35,2016           00470                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#5550444154464C47">UPDATFLG</a>                              
026139,000064: 35,2017           01067                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#5844454C56464C47">XDELVFLG</a>                              
026140,000065: 35,2020           77776                           <span class="in">EXIT    </span>                                       
<a name="504152414D3330"></a>026141,000066: 35,2021           32033        <span class="sm">PARAM30 </span>           <span class="op">CAF     </span> <a href="#5630364E3432">V06N42</a>                                <span class="co">#  DISPLAY APOGEE,PERIGEE,DELTA V</span>
026142,000067:                                                                                                  <span class="co">#  Page 625</span>
026143,000068: 35,2022           03621                           <span class="op">TC      </span> <a href="P34-35_P74-75.agc.html#564E50303048">VNP00H</a>                                
026144,000069: 
026145,000070: 35,2023           06042                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
026146,000071: 35,2024           77614                           <span class="in">SET     </span>                                       
026147,000072: 35,2025           01071                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#46494E414C464C47">FINALFLG</a>                              
<a name="5245564E31363435"></a>026148,000073: 35,2026           77624        <span class="sm">REVN1645</span>           <span class="in">CALL    </span>                                       
026149,000074: 35,2027           73515                                    <a href="P34-35_P74-75.agc.html#564E31363435">VN1645</a>                                
026150,000075: 35,2030           77650                           <span class="in">GOTO    </span>                                       <span class="co">#  COMES HERE ON RECYCLE RESPONSE</span>
026151,000076: 35,2031           72026                                    <a href="#5245564E31363435">REVN1645</a>                              
026152,000077: 
<a name="5630364E3333"></a>026153,000078: 35,2032           01441        <span class="sm">V06N33  </span>           <span class="ps">VN      </span> 0633                                  
<a name="5630364E3432"></a>026154,000079: 35,2033           01452        <span class="sm">V06N42  </span>           <span class="ps">VN      </span> 0642                                  
026155,000080: 
026156,000081:                                                                                                  <span class="co">#  Page 626</span>
026157,000082:                                                                                                  <span class="co">#  PROGRAM DESCRPTION S30.1      DATE 9NOV66</span>
026158,000083:                                                                                                  <span class="co">#  MOD NO 1                      LOG SECTION P30,P37</span>
026159,000084:                                                                                                  <span class="co">#  MOD BY RAMA AIYAWAR **</span>
026160,000085: 
026161,000086:                                                                                                  <span class="co">#  FUNCTIONAL DESCRIPTION</span>
026162,000087:                                                                                                  <span class="co">#        BASED ON STORED TARGET PARAMETERS (R OF IGNITION (RTIG), V OF</span>
026163,000088:                                                                                                  <span class="co">#        IGNITION (VTIG), TIME OF IGNITION (TIG)), COMPUTE PERIGEE ALTITUDE</span>
026164,000089:                                                                                                  <span class="co">#        APOGEE ALTITUDE AND DELTAV REQUIRED (DELVSIN).</span>
026165,000090: 
026166,000091:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
026167,000092:                                                                                                  <span class="co">#        L       CALL</span>
026168,000093:                                                                                                  <span class="co">#        L+1             s30.1</span>
026169,000094: 
026170,000095:                                                                                                  <span class="co">#  NORMAL EXIT MODE</span>
026171,000096:                                                                                                  <span class="co">#        AT L+2 OR CALLING SEQUENCE (GOTO L+2)</span>
026172,000097: 
026173,000098:                                                                                                  <span class="co">#  SUBROUTINES CALLED</span>
026174,000099:                                                                                                  <span class="co">#        LEMPREC</span>
026175,000100:                                                                                                  <span class="co">#        PERIAPO</span>
026176,000101: 
026177,000102:                                                                                                  <span class="co">#  ALARM OR ABORT EXIT MODES</span>
026178,000103:                                                                                                  <span class="co">#        NONE</span>
026179,000104: 
026180,000105:                                                                                                  <span class="co">#  ERASABLE INITIALIZATION REQUIRED</span>
026181,000106:                                                                                                  <span class="co">#        TIG             TIME OF IGNITION        DP B28CS</span>
026182,000107:                                                                                                  <span class="co">#        DELVSLV         SPECIFIED DELTA-V INLOCAL VERT.</span>
026183,000108:                                                                                                  <span class="co">#                        COORDS. OF ACTIVE VEHICLE AT</span>
026184,000109:                                                                                                  <span class="co">#                        TIME OF IGNITION        VECTOR B+7 METERS/CS</span>
026185,000110: 
026186,000111:                                                                                                  <span class="co">#  OUTPUT</span>
026187,000112:                                                                                                  <span class="co">#        RTIG            POSITION AT TIG         VECTOR B+29 METERS</span>
026188,000113:                                                                                                  <span class="co">#        VTIG            VELOCITY AT TIG         VECTOR B+29 METERS/CS</span>
026189,000114:                                                                                                  <span class="co">#        PDL 4D          APOGEE ALTITUDE         DP B+29 M, B+27 METERS.</span>
026190,000115:                                                                                                  <span class="co">#        HAPO            APOGEE ALTITUDE         DP B+29 METERS</span>
026191,000116:                                                                                                  <span class="co">#        PDL 8D          PERIGEE ALTITUDE        DP B+29 M, B+27 METERS.</span>
026192,000117:                                                                                                  <span class="co">#        HPER            PERIGEE ALTITUDE        DP B+29 METERS</span>
026193,000118:                                                                                                  <span class="co">#        DELVSIN         SPECIFIED DELTA-V AT INTERTIAL</span>
026194,000119:                                                                                                  <span class="co">#                        COORD. OF ACTIVE VEHICLE AT</span>
026195,000120:                                                                                                  <span class="co">#                        TIME OF IGNITION        VECTOR B+7 METERS/CS</span>
026196,000121:                                                                                                  <span class="co">#        DELVSAB         MAG. OF DELVSIN         VECTOR B+7 METERS/CS</span>
026197,000122: 
026198,000123:                                                                                                  <span class="co">#  DEBRIS        QTEMP   TEMP.ERASABLE</span>
026199,000124:                                                                                                  <span class="co">#                QPRET, MPAC</span>
026200,000125:                                                                                                  <span class="co">#                PUSHLIST</span>
026201,000126: 
026202,000127: 34,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC.agc.html#5033305331">P30S1</a>                                 
026203,000128: 34,2000                                           <span class="ps">BANK    </span>                                       
026204,000129: 
026205,000130: 34,2000                                           <span class="ps">COUNT*  </span> $$/S30S                               
026206,000131: 
<a name="5333302E31"></a>026207,000132: 34,2000           71220        <span class="sm">S30.1   </span>           <span class="in">STQ     </span> <span class="in">DLOAD     </span>                            
026208,000133: 34,2001           03632                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5154454D50">QTEMP</a>                                 
026209,000134: 34,2002           03442                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#544947">TIG</a>                                   <span class="co">#  TIME IGNITION SCALED AT 2(+28)CS</span>
026210,000135: 34,2003           34041                           <span class="in">STCALL  </span> <a href="ORBITAL_INTEGRATION.agc.html#5444454331">TDEC1</a>                                 
026211,000136: 34,2004           27056                                    <a href="INTEGRATION_INITIALIZATION.agc.html#4C454D50524543">LEMPREC</a>                               <span class="co">#  ENCKE ROUTINE FOR LEM</span>
026212,000137: 
026213,000138: 34,2005           67175                           <span class="in">VLOAD   </span> <span class="in">SXA,2     </span>                            
026214,000139:                                                                                                  <span class="co">#  Page 627</span>
026215,000140: 34,2006           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
026216,000141: 34,2007           02777                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52545832">RTX2</a>                                  
026217,000142: 34,2010           03642                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#52544947">RTIG</a>                                  <span class="co">#  RADIUS VECTOR AT IGNITION TIME</span>
026218,000143: 34,2011           57456                           <span class="in">UNIT    </span> <span class="in">VCOMP     </span>                            
026219,000144: 34,2012           27656                           <span class="in">STOVL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5653494E">DELVSIN</a>                               <span class="co">#  ZRF/LV IN DELVSIN SCALED AT 2</span>
026220,000145: 34,2013           00007                                    <a href="ORBITAL_INTEGRATION.agc.html#56415454">VATT</a>                                  <span class="co">#  VELOCITY VECTOR AT TIG, SCALED 2(7) M/CS</span>
026221,000146: 34,2014           03650                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#56544947">VTIG</a>                                  
026222,000147: 34,2015           53435                           <span class="in">VXV     </span> <span class="in">UNIT      </span>                            
026223,000148: 34,2016           03642                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52544947">RTIG</a>                                  
026224,000149: 34,2017           66001                           <span class="in">SETPD   </span> <span class="in">SXA,1     </span>                            
026225,000150: 34,2020           00001                                    0                                     
026226,000151: 34,2021           02776                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52545831">RTX1</a>                                  
026227,000152: 34,2022           47206                           <span class="in">PUSH    </span> <span class="in">VXV       </span>                            <span class="co">#  YRF/LV PDL 0 SCALED AT 2</span>
026228,000153: 34,2023           03656                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5653494E">DELVSIN</a>                               
026229,000154: 34,2024           63372                           <span class="in">VSL1    </span> <span class="in">PDVL      </span>                            
026230,000155: 34,2025           63315                           <span class="in">PDVL    </span> <span class="in">PDVL      </span>                            <span class="co">#  YRF/LV PDL 6 SCALED AT 2</span>
026231,000156: 34,2026           03656                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5653494E">DELVSIN</a>                               <span class="co">#  ZRF/LV PDL 12D SCALED AT 2</span>
026232,000157: 34,2027           03434                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C56534C56">DELVSLV</a>                               
026233,000158: 34,2030           76505                           <span class="in">VXM     </span> <span class="in">VSL1      </span>                            
026234,000159: 34,2031           00001                                    0                                     
026235,000160: 34,2032           03656                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5653494E">DELVSIN</a>                               <span class="co">#  DELTAV IN INERT. COOR. SCALED TO B+7M/CS</span>
026236,000161: 34,2033           77646                           <span class="in">ABVAL   </span>                                       
026237,000162: 34,2034           27664                           <span class="in">STOVL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C56534142">DELVSAB</a>                               <span class="co">#  DELTA V MAG.</span>
026238,000163: 34,2035           03642                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52544947">RTIG</a>                                  <span class="co">#  (FOR PERIAPO)</span>
026239,000164: 34,2036           53315                           <span class="in">PDVL    </span> <span class="in">VAD       </span>                            <span class="co">#  VREQUIRED = VTIG + DELVSIN (FOR PERIAPO)</span>
026240,000165: 34,2037           03650                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#56544947">VTIG</a>                                  
026241,000166: 34,2040           03656                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5653494E">DELVSIN</a>                               
026242,000167: 34,2041           77624                           <span class="in">CALL    </span>                                       
026243,000168: 34,2042           46341                                    <a href="P34-35_P74-75.agc.html#5045524941504F31">PERIAPO1</a>                              
026244,000169: 34,2043           77624                           <span class="in">CALL    </span>                                       
026245,000170: 34,2044           46451                                    <a href="P34-35_P74-75.agc.html#53484946545231">SHIFTR1</a>                               <span class="co">#  RESCALE IF NEEDED</span>
026246,000171: 34,2045           77624                           <span class="in">CALL    </span>                                       <span class="co">#  LIMIT DISPLAY TO 9999.9 N. MI.</span>
026247,000172: 34,2046           45636                                    <a href="R30.agc.html#4D415843484B">MAXCHK</a>                                
026248,000173: 34,2047           16321                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#48504552">HPER</a>                                  <span class="co">#  PERIGEE ALT 2(29) METERS FOR DISPLAY</span>
026249,000174: 34,2050           00005                                    4D                                    
026250,000175: 34,2051           77624                           <span class="in">CALL    </span>                                       
026251,000176: 34,2052           46451                                    <a href="P34-35_P74-75.agc.html#53484946545231">SHIFTR1</a>                               <span class="co">#  RESCALE IF NEEDED</span>
026252,000177: 34,2053           77624                           <span class="in">CALL    </span>                                       <span class="co">#  LIMIT DISPLAY TO 9999.9 N. MI.</span>
026253,000178: 34,2054           45636                                    <a href="R30.agc.html#4D415843484B">MAXCHK</a>                                
026254,000179: 34,2055           36317                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4841504F">HAPO</a>                                  <span class="co">#  APOGEE ALT 2(29) METERS FOR DISPLAY</span>
026255,000180: 34,2056           03632                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5154454D50">QTEMP</a>                                 
026256,000181: 
026257,000182: 

End of include-file P30_P37.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
