<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source code files have been transcribed or otherwise adapted from
digitized images of a hardcopy from the private collection of 
Don Eyles.  The digitization was performed by archive.org, and 
transcription was performed by a team of volunteers.
Note that the page images <a href="https://www.ibiblio.org/apollo/ScansForConversion/Aurora12/">
presented online</a> are of reduced quality, and that the original 
high-quality images are available at <a href="https://archive.org/details/aurora00dapg">archive.org</a>.  
Report any conversion errors or legibility problems in page images to info@sandroid.org.
Notations on the program listing read, in part:<br>
<br>
<pre>
    473423A YUL SYSTEM FOR BLK2: REVISION 12 of PROGRAM AURORA BY DAP GROUP   NOV 10, 1966
</pre>
Note that the date is the date of the printout, not the date of the program revision.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
005540,000002:                                                                                                  <span class="co">#  Copyright:    Public domain.</span>
005541,000003:                                                                                                  <span class="co">#  Filename:     PHASE_TABLE_MAINTENANCE.agc</span>
005542,000004:                                                                                                  <span class="co">#  Purpose:      Part of the source code for Aurora (revision 12).</span>
005543,000005:                                                                                                  <span class="co">#  Assembler:    yaYUL</span>
005544,000006:                                                                                                  <span class="co">#  Contact:      Ron Burkey &lt;info@sandroid.org>.</span>
005545,000007:                                                                                                  <span class="co">#  Website:      https://www.ibiblio.org/apollo.</span>
005546,000008:                                                                                                  <span class="co">#  Pages:        148-150</span>
005547,000009:                                                                                                  <span class="co">#  Mod history:  2016-09-20 JL   Created.</span>
005548,000010:                                                                                                  <span class="co">#                2016-10-03 JL   Transcribed pages 148-150.</span>
005549,000011:                                                                                                  <span class="co">#                2016-10-08 HG   change TS LXCH -> TS L</span>
005550,000012: 
005551,000013:                                                                                                  <span class="co">#  This source code has been transcribed or otherwise adapted from</span>
005552,000014:                                                                                                  <span class="co">#  digitized images of a hardcopy from the private collection of</span>
005553,000015:                                                                                                  <span class="co">#  Don Eyles.  The digitization was performed by archive.org.</span>
005554,000016: 
005555,000017:                                                                                                  <span class="co">#  Notations on the hardcopy document read, in part:</span>
005556,000018: 
005557,000019:                                                                                                  <span class="co">#        473423A YUL SYSTEM FOR BLK2: REVISION 12 of PROGRAM AURORA BY DAP GROUP</span>
005558,000020:                                                                                                  <span class="co">#        NOV 10, 1966</span>
005559,000021: 
005560,000022:                                                                                                  <span class="co">#        [Note that this is the date the hardcopy was made, not the</span>
005561,000023:                                                                                                  <span class="co">#        date of the program revision or the assembly.]</span>
005562,000024: 
005563,000025:                                                                                                  <span class="co">#  The scan images (with suitable reduction in storage size and consequent</span>
005564,000026:                                                                                                  <span class="co">#  reduction in image quality) are available online at</span>
005565,000027:                                                                                                  <span class="co">#        https://www.ibiblio.org/apollo.</span>
005566,000028:                                                                                                  <span class="co">#  The original high-quality digital images are available at archive.org:</span>
005567,000029:                                                                                                  <span class="co">#        https://archive.org/details/aurora00dapg</span>
005568,000030: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 148
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
005570,000032:                                                                                                  <span class="co">#        THE FOLLOWING ROUTINES ARE PROVIDED TO MAINTAIN THE PHASE TABLE. TWO ROUTINES ARE AVILABLE:</span>
005571,000033: 
005572,000034:                                                                                                  <span class="co">#                TC      PHASCHNG        SLOWER BUT LESS STORAGE.</span>
005573,000035:                                                                                                  <span class="co">#                OCT     PPPGG           CHANGE RESTART GROUP GG TO PHASE PPP</span>
005574,000036:                                                                                                  <span class="co">#                                        (PPP IS A SIGNED 8 BIT NUMBER).</span>
005575,000037: 
005576,000038:                                                                                                  <span class="co">#                CA      PPPPP           NEW PHASE ARRIVES IN A.</span>
005577,000039:                                                                                                  <span class="co">#                TC      NEWPHASE</span>
005578,000040:                                                                                                  <span class="co">#                OCT     000GG           UPDATES GG.</span>
005579,000041: 
005580,000042:                                                                                                  <span class="co">#        IN ALL CASES THE OLD PHASE RETURNS IN A. IF THE OLD PHASE WAS NEGATIVE, CALL A ROUTINE USING THE</span>
005581,000043:                                                                                                  <span class="co">#  CORRESPONDING TERMCADR.</span>
005582,000044: 
005583,000045:    4614                                           <span class="ps">SETLOC  </span> <a href="WAITLIST.agc.html#454E445741495446">ENDWAITF</a>                              
005584,000046: 
<a name="5048415343484E47"></a>005585,000047:    4614           00004        <span class="sm">PHASCHNG</span>           <span class="op">INHINT  </span>                                       
005586,000048:    4615           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005587,000049:    4616           30000                           <span class="op">CAF     </span> 0                                     <span class="co">#  GET PARAMETER WORD.</span>
005588,000050:    4617           54077                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
005589,000051:    4620           75224                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  GROUP NUMBER 0 - 37.</span>
005590,000052:    4621           60000                           <span class="op">DOUBLE  </span>                                       
005591,000053:    4622           56077                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
005592,000054:    4623           00006                           <span class="op">EXTEND  </span>                                       
005593,000055:    4624           77647                           <span class="op">MP      </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#42495439">BIT9</a>                                  <span class="co">#  SIGNED NEW PHASE.</span>
005594,000056:    4625           14634                           <span class="op">TCF     </span> <a href="#50484153434832">PHASCH2</a>                               
005595,000057: 
<a name="4E45575048415345"></a>005596,000058:    4626           00004        <span class="sm">NEWPHASE</span>           <span class="op">INHINT  </span>                                       <span class="co">#  NEW PHASE ARRIVES IN A.</span>
005597,000059:    4627           54077                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
005598,000060:    4630           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005599,000061:    4631           30000                           <span class="op">CAF     </span> 0                                     <span class="co">#  GROUP NUMBER.</span>
005600,000062:    4632           60000                           <span class="op">DOUBLE  </span>                                       
005601,000063:    4633           56077                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
005602,000064: 
<a name="50484153434832"></a>005603,000065:    4634           54001        <span class="sm">PHASCH2 </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     <span class="co">#  DIRECT VERSION.</span>
005604,000066:    4635           40000                           <span class="op">COM     </span>                                       <span class="co">#  COMPLEMENTED VERSION IMMEDIATELY PRE-</span>
005605,000067:    4636           50077                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              <span class="co">#  CEDES THE DIRECT ONE.</span>
005606,000068:    4637           53072                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#2D504841534530">-PHASE0</a>                               <span class="co">#  COPIES DISAGREE FOR MINIMUM TIME.</span>
005607,000069:    4640           00006                           <span class="op">EXTEND  </span>                                       
005608,000070:    4641           64655                           <span class="op">BZMF    </span> <a href="#5048415345584954">PHASEXIT</a>                              <span class="co">#  IF NO DERAIL.</span>
005609,000071: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 149
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
005611,000073:    4642           54074                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454731">RUPTREG1</a>                              <span class="co">#  IF NEGATIVE, SAVE ABSOLUTE VALUE OF</span>
005612,000074:    4643           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  OLD PHASE AND RETURN Q.</span>
005613,000075:    4644           22075                           <span class="op">QXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454732">RUPTREG2</a>                              
005614,000076:    4645           30077                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              <span class="co">#  GET BACK GROUP NUMBER.</span>
005615,000077:    4646           00006                           <span class="op">EXTEND  </span>                                       
005616,000078:    4647           77642                           <span class="op">MP      </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#48414C46">HALF</a>                                  
005617,000079:    4650           50000                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     <span class="co">#  SELECT TERMCADR.</span>
005618,000080:    4651           34661                           <span class="op">CAF     </span> <a href="#5445524D43414452">TERMCADR</a>                              
005619,000081:    4652           04162                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#49535743414C4C">ISWCALL</a>                               
005620,000082: 
005621,000083:    4653           52075                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454731">RUPTREG1</a>                              <span class="co">#  -OLD PHASE BITS TO A - RETURN -1 TO L.</span>
005622,000084:    4654           22002                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005623,000085: 
<a name="5048415345584954"></a>005624,000086:    4655           40000        <span class="sm">PHASEXIT</span>           <span class="op">COM     </span>                                       <span class="co">#  RETURN OLD PHASE IN A.</span>
005625,000087:    4656           00003                           <span class="op">RELINT  </span>                                       
005626,000088:    4657           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005627,000089:    4660           00001                           <span class="op">TC      </span> 1                                     
005628,000090: 
<a name="5445524D43414452"></a>005629,000091:    4661           00000        <span class="sm">TERMCADR</span>           <span class="ps">CADR    </span> 10000                                 <span class="co">#  FILLED IN AS NEEDED.</span>
005630,000092:    4662           00000                           <span class="ps">CADR    </span> 10000                                 
005631,000093:    4663           00000                           <span class="ps">CADR    </span> 10000                                 
005632,000094:    4664           00000                           <span class="ps">CADR    </span> 10000                                 
005633,000095:    4665           00000                           <span class="ps">CADR    </span> 10000                                 
005634,000096:    4666           00000                           <span class="ps">CADR    </span> 10000                                 
005635,000097: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 150
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
005637,000099:                                                                                                  <span class="co">#        SUBROUTINE TO UPDATE THE PROGRAM NUMBER DISPLAY ON THE DSKY.</span>
005638,000100: 
<a name="4E45574D4F444558"></a>005639,000101:    4667           50002        <span class="sm">NEWMODEX</span>           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  UPDATE MODREG.</span>
005640,000102:    4670           30000                           <span class="op">CAF     </span> 0                                     
005641,000103:    4671           24002                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005642,000104:    4672           56276                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4F44524547">MODREG</a>                                
005643,000105:    4673           40000                           <span class="op">COM     </span>                                       <span class="co">#  IF NO CHANGE IN MODE, RETURN IMMEDIATELY</span>
005644,000106:    4674           60276                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4F44524547">MODREG</a>                                
005645,000107:    4675           00006                           <span class="op">EXTEND  </span>                                       
005646,000108:    4676           14712                           <span class="op">BZF     </span> <a href="#544351">TCQ</a>                                   
005647,000109: 
005648,000110:    4677           34701                           <span class="op">CAF     </span> +2                                    <span class="co">#  CALL PINBALL SUBROUTINE.</span>
005649,000111:    4700           14067                           <span class="op">TCF     </span> <a href="INTER-BANK_COMMUNICATION.agc.html#535743414C4C">SWCALL</a>                                <span class="co">#  WITH Q SET TO CALLERS RETURN.</span>
005650,000112: 
005651,000113:    4701           12001                           <span class="ps">CADR    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4453504D4D">DSPMM</a>                                 
005652,000114: 
005653,000115:                                                                                                  <span class="co">#        RETURN TO CALLER +3 IF MODE = THAT AT CALLER +1. OTHERWISE RETURN TO CALLER +2.</span>
005654,000116: 
<a name="434845434B4D4D"></a>005655,000117:    4702           50002        <span class="sm">CHECKMM </span>           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005656,000118:    4703           40000                           <span class="op">CS      </span> 0                                     
005657,000119:    4704           60276                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4F44524547">MODREG</a>                                
005658,000120:    4705           00006                           <span class="op">EXTEND  </span>                                       
005659,000121:    4706           14711                           <span class="op">BZF     </span> +3                                    
005660,000122: 
005661,000123:    4707           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005662,000124:    4710           00001                           <span class="op">TC      </span> 1                                     <span class="co">#  NO MATCH.</span>
005663,000125: 
005664,000126:    4711           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
<a name="544351"></a>005665,000127:    4712           00002        <span class="sm">TCQ     </span>           <span class="op">TC      </span> 2                                     <span class="co">#  (ALWAYS AVAILABLE TO BZF &amp; BZMF)</span>
005666,000128: 
<a name="454E4450484D4E46"></a>005667,000129:    4713                        <span class="sm">ENDPHMNF</span>           <span class="ps">EQUALS  </span>                                       

End of include-file PHASE_TABLE_MAINTENANCE.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
